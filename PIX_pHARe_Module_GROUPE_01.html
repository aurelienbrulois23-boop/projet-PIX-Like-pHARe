<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIX-pHARe | Module GROUPE 01 - Le Triangle Infernal</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&family=Share+Tech+Mono&display=swap');
        
        :root {
            --triangle-red: #ef4444;
            --triangle-blue: #3b82f6;
            --triangle-yellow: #eab308;
            --witness-purple: #a855f7;
            --safety-green: #22c55e;
            --void-dark: #0d0d1a;
            --deep-dark: #080812;
            --panel-bg: rgba(13, 13, 26, 0.95);
            --text-primary: #f5f5ff;
            --text-secondary: #9999bb;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--void-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Triangle pattern background */
        .triangle-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                linear-gradient(60deg, rgba(239, 68, 68, 0.05) 0%, transparent 50%),
                linear-gradient(180deg, rgba(59, 130, 246, 0.05) 0%, transparent 50%),
                linear-gradient(300deg, rgba(234, 179, 8, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        /* Animated connection lines */
        .connection-lines {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
        }
        
        .connection-lines::before,
        .connection-lines::after {
            content: '';
            position: absolute;
            background: linear-gradient(90deg, transparent, var(--witness-purple), transparent);
            height: 1px;
            width: 200px;
            animation: lineMove 8s linear infinite;
        }
        
        .connection-lines::before { top: 30%; left: -200px; }
        .connection-lines::after { top: 70%; right: -200px; animation-delay: -4s; animation-direction: reverse; }
        
        @keyframes lineMove {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(100vw + 400px)); }
        }
        
        .app-container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 40px 20px;
        }
        
        .pillar-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 15px rgba(168, 85, 247, 0.6));
        }
        
        .glitch-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--triangle-red), var(--witness-purple), var(--triangle-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
        }
        
        .subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            color: var(--witness-purple);
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .module-badge {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 35px;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(59, 130, 246, 0.2), rgba(234, 179, 8, 0.2));
            border: 2px solid var(--witness-purple);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--witness-purple);
            clip-path: polygon(10px 0%, calc(100% - 10px) 0%, 100% 50%, calc(100% - 10px) 100%, 10px 100%, 0% 50%);
        }
        
        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .progress-node {
            width: 55px; height: 55px;
            border: 3px solid var(--text-secondary);
            background: var(--deep-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-secondary);
            clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
            transition: all 0.4s ease;
        }
        
        .progress-node.active {
            border-color: var(--witness-purple);
            color: var(--witness-purple);
            box-shadow: 0 0 25px rgba(168, 85, 247, 0.5);
        }
        
        .progress-node.completed {
            border-color: var(--safety-green);
            background: rgba(34, 197, 94, 0.2);
            color: var(--safety-green);
        }
        
        .xp-display {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .xp-box {
            background: var(--panel-bg);
            border: 2px solid var(--witness-purple);
            padding: 15px 25px;
            text-align: center;
            clip-path: polygon(8px 0%, calc(100% - 8px) 0%, 100% 8px, 100% calc(100% - 8px), calc(100% - 8px) 100%, 8px 100%, 0% calc(100% - 8px), 0% 8px);
        }
        
        .xp-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .xp-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--witness-purple);
        }
        
        .content-panel {
            background: var(--panel-bg);
            border: 2px solid rgba(168, 85, 247, 0.3);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .content-panel::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--triangle-red), var(--witness-purple), var(--triangle-blue), var(--triangle-yellow));
        }
        
        .panel-header {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(59, 130, 246, 0.1));
            padding: 18px 25px;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .panel-icon {
            width: 50px; height: 50px;
            background: linear-gradient(135deg, var(--witness-purple), var(--triangle-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
        }
        
        .panel-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--witness-purple);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .panel-body { padding: 25px; }
        
        /* Intro specific styles */
        .intro-screen { text-align: center; padding: 30px 20px; }
        
        .triangle-diagram {
            margin: 30px auto;
            max-width: 350px;
            position: relative;
        }
        
        .triangle-svg {
            width: 100%;
            height: auto;
        }
        
        .role-card {
            display: inline-block;
            padding: 15px 25px;
            margin: 10px;
            border: 2px solid;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            text-transform: uppercase;
        }
        
        .role-harceleur { border-color: var(--triangle-red); color: var(--triangle-red); background: rgba(239, 68, 68, 0.1); }
        .role-victime { border-color: var(--triangle-blue); color: var(--triangle-blue); background: rgba(59, 130, 246, 0.1); }
        .role-temoins { border-color: var(--triangle-yellow); color: var(--triangle-yellow); background: rgba(234, 179, 8, 0.1); }
        
        /* Name input */
        .name-input-group {
            margin: 30px auto;
            max-width: 400px;
        }
        
        .name-input {
            width: 100%;
            padding: 15px;
            background: var(--deep-dark);
            border: 2px solid var(--witness-purple);
            color: var(--text-primary);
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            margin-bottom: 15px;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--safety-green);
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
        }
        
        .name-input::placeholder { color: var(--text-secondary); }
        
        /* Flashcards */
        .flashcard-container { perspective: 1200px; margin-bottom: 20px; }
        
        .flashcard {
            position: relative;
            width: 100%;
            min-height: 240px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .flashcard.flipped { transform: rotateY(180deg); }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            min-height: 240px;
            backface-visibility: hidden;
            border: 2px solid var(--witness-purple);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 25px;
            background: var(--deep-dark);
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(59, 130, 246, 0.1));
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(168, 85, 247, 0.1));
            border-color: var(--safety-green);
        }
        
        .flashcard-role {
            position: absolute;
            top: 15px; right: 15px;
            padding: 6px 15px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .flashcard-role.harceleur { background: var(--triangle-red); color: white; }
        .flashcard-role.victime { background: var(--triangle-blue); color: white; }
        .flashcard-role.temoin { background: var(--triangle-yellow); color: var(--deep-dark); }
        .flashcard-role.dynamique { background: var(--witness-purple); color: white; }
        
        .flashcard-question {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--witness-purple);
            text-align: center;
            margin-bottom: 15px;
        }
        
        .flashcard-hint {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85rem;
            color: var(--triangle-blue);
            text-align: center;
        }
        
        .flashcard-answer {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-primary);
        }
        
        .flashcard-answer strong { color: var(--safety-green); }
        .flashcard-answer .warning { color: var(--triangle-red); }
        .flashcard-answer .info { color: var(--triangle-blue); }
        
        .flashcard-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .nav-btn {
            background: transparent;
            border: 2px solid var(--triangle-blue);
            color: var(--triangle-blue);
            padding: 12px 30px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        .nav-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }
        
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        
        /* Quiz styles */
        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(59, 130, 246, 0.1));
            border-left: 4px solid var(--witness-purple);
        }
        
        .quiz-options { display: flex; flex-direction: column; gap: 12px; }
        
        .quiz-option {
            background: var(--deep-dark);
            border: 2px solid var(--text-secondary);
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .quiz-option:hover:not(.selected):not(.correct):not(.incorrect) {
            border-color: var(--witness-purple);
            background: rgba(168, 85, 247, 0.1);
            transform: translateX(5px);
        }
        
        .quiz-option.selected { border-color: var(--triangle-blue); background: rgba(59, 130, 246, 0.15); }
        .quiz-option.correct { border-color: var(--safety-green); background: rgba(34, 197, 94, 0.2); }
        .quiz-option.incorrect { border-color: var(--triangle-red); background: rgba(239, 68, 68, 0.15); }
        
        .option-marker {
            width: 35px; height: 35px;
            border: 2px solid currentColor;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
        }
        
        .option-text { flex: 1; font-size: 0.95rem; }
        
        .feedback-box {
            margin-top: 20px;
            padding: 20px;
            border-left: 4px solid var(--safety-green);
            background: rgba(34, 197, 94, 0.1);
        }
        
        .feedback-box.incorrect-feedback {
            border-color: var(--triangle-red);
            background: rgba(239, 68, 68, 0.1);
        }
        
        .feedback-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--safety-green);
            margin-bottom: 10px;
        }
        
        .feedback-box.incorrect-feedback .feedback-title { color: var(--triangle-red); }
        
        /* Scenario styles */
        .scenario-intro {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(168, 85, 247, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .scenario-context {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--triangle-yellow);
            margin-bottom: 15px;
            padding: 12px 15px;
            background: rgba(234, 179, 8, 0.1);
            border: 1px dashed var(--triangle-yellow);
        }
        
        .character-box {
            display: inline-block;
            padding: 5px 12px;
            margin: 3px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.8rem;
            border: 1px solid;
        }
        
        .char-harceleur { border-color: var(--triangle-red); color: var(--triangle-red); }
        .char-victime { border-color: var(--triangle-blue); color: var(--triangle-blue); }
        .char-temoin { border-color: var(--triangle-yellow); color: var(--triangle-yellow); }
        
        .choice-btn {
            display: block;
            width: 100%;
            background: var(--deep-dark);
            border: 2px solid var(--text-secondary);
            padding: 18px 20px;
            margin-bottom: 12px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            color: var(--text-primary);
        }
        
        .choice-btn:hover {
            border-color: var(--witness-purple);
            background: rgba(168, 85, 247, 0.1);
            transform: translateX(5px);
        }
        
        .choice-result {
            margin-top: 20px;
            padding: 20px;
            background: var(--deep-dark);
            border: 2px solid var(--safety-green);
        }
        
        .impact-score {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .impact-item {
            padding: 8px 15px;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid var(--witness-purple);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85rem;
        }
        
        .impact-item.positive { border-color: var(--safety-green); color: var(--safety-green); }
        .impact-item.negative { border-color: var(--triangle-red); color: var(--triangle-red); }
        
        .action-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--witness-purple), var(--triangle-blue));
            color: white;
            border: none;
            padding: 15px 40px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            clip-path: polygon(15px 0%, calc(100% - 15px) 0%, 100% 50%, calc(100% - 15px) 100%, 15px 100%, 0% 50%);
        }
        
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
        }
        
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        /* Completion */
        .completion-screen { text-align: center; padding: 50px 20px; }
        
        .completion-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: trianglePulse 2s ease-in-out infinite;
        }
        
        @keyframes trianglePulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }
        
        .completion-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--triangle-red), var(--witness-purple), var(--triangle-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: var(--panel-bg);
            border: 2px solid var(--witness-purple);
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--witness-purple);
        }
        
        .stat-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-top: 5px;
        }
        
        .save-code-box {
            background: var(--deep-dark);
            border: 2px solid var(--safety-green);
            padding: 25px;
            margin: 30px 0;
        }
        
        .save-code-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--safety-green);
            margin-bottom: 10px;
        }
        
        .save-code {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--witness-purple);
            word-break: break-all;
            background: rgba(168, 85, 247, 0.1);
            padding: 15px;
            border: 1px dashed var(--witness-purple);
        }
        
        .copy-btn {
            margin-top: 15px;
            background: transparent;
            border: 2px solid var(--safety-green);
            color: var(--safety-green);
            padding: 10px 25px;
            font-family: 'Share Tech Mono', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover { background: rgba(34, 197, 94, 0.2); }
        
        .mastery-badge {
            display: inline-block;
            padding: 10px 25px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
            border: 2px solid;
            margin-top: 15px;
        }
        
        .mastery-expert { color: var(--witness-purple); border-color: var(--witness-purple); box-shadow: 0 0 20px rgba(168, 85, 247, 0.5); }
        .mastery-confirmed { color: var(--triangle-blue); border-color: var(--triangle-blue); }
        .mastery-training { color: var(--safety-green); border-color: var(--safety-green); }
        
        @media (max-width: 600px) {
            .glitch-title { font-size: 1.5rem; }
            .progress-node { width: 45px; height: 45px; font-size: 1rem; }
            .panel-body { padding: 15px; }
            .flashcard-face { padding: 20px 15px; min-height: 260px; }
        }
    </style>
</head>
<body>
    <div class="triangle-bg"></div>
    <div class="connection-lines"></div>
    
    <div id="root"></div>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script>
        const { useState } = React;
        const e = React.createElement;

        const MODULE_ID = "GROUPE_01";
        const MODULE_VERSION = "1.0";
        const MODULE_TITLE = "Le Triangle Infernal";
        
        const flashcardsData = [
            {
                role: "dynamique",
                question: "Qu'est-ce que le 'triangle du harc√®lement' ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "Trois r√¥les interd√©pendants : <strong>l'auteur</strong> (qui agit), <strong>la cible</strong> (qui subit), et <strong>les t√©moins</strong> (qui voient). Le harc√®lement n'existe QUE s'il y a ces trois composantes. Les t√©moins sont la cl√© : sans public, pas de 'spectacle'."
            },
            {
                role: "harceleur",
                question: "Pourquoi quelqu'un devient-il auteur de harc√®lement ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "Rarement par 'm√©chancet√© pure'. Souvent : <span class='info'>besoin de domination</span>, <span class='info'>ins√©curit√© personnelle</span>, <span class='info'>reproduction de violence subie</span>, <span class='info'>pression du groupe</span>. Comprendre ‚â† excuser. Mais identifier les causes permet d'agir."
            },
            {
                role: "victime",
                question: "Pourquoi certains deviennent-ils cibles ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "<span class='warning'>FAUX</span> : 'C'est √† cause de leur personnalit√©.' <strong>VRAI</strong> : N'importe qui peut devenir cible. Les auteurs choisissent souvent ceux qui semblent isol√©s ou diff√©rents (apparence, comportement, statut social). La 'diff√©rence' est un pr√©texte, pas une cause."
            },
            {
                role: "temoin",
                question: "Quel est le r√¥le crucial des t√©moins ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "Les t√©moins ont le <strong>POUVOIR DE TOUT CHANGER</strong>. Leur silence = approbation implicite. Leur r√©action = signal fort. √âtudes montrent : si UN t√©moin intervient, le harc√®lement s'arr√™te dans <strong>57% des cas en 10 secondes</strong>."
            },
            {
                role: "dynamique",
                question: "Qu'est-ce que 'l'effet spectateur' (bystander effect) ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "Plus il y a de t√©moins, moins chacun se sent responsable d'agir. 'Quelqu'un d'autre va intervenir.' R√©sultat : personne n'intervient. C'est un <strong>biais cognitif</strong>, pas de la l√¢chet√©. Le conna√Ætre permet de le combattre."
            },
            {
                role: "temoin",
                question: "Quels sont les diff√©rents types de t√©moins ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "<strong>1) Supporters actifs</strong> : encouragent. <strong>2) Supporters passifs</strong> : rient, regardent. <strong>3) T√©moins passifs</strong> : ignorent. <strong>4) D√©fenseurs potentiels</strong> : n'aiment pas mais n'osent pas. <strong>5) D√©fenseurs actifs</strong> : interviennent. L'objectif pHARe : transformer les 4 en 5."
            },
            {
                role: "harceleur",
                question: "Qu'est-ce que le 'd√©sengagement moral' ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "M√©canismes psychologiques pour justifier ses actes : <span class='warning'>'C'est juste pour rire'</span>, <span class='warning'>'Il/elle l'a cherch√©'</span>, <span class='warning'>'Tout le monde le fait'</span>, <span class='warning'>'C'est pas si grave'</span>. Reconna√Ætre ces phrases = identifier la manipulation morale."
            },
            {
                role: "dynamique",
                question: "Pourquoi le harc√®lement se r√©p√®te-t-il ?",
                hint: "[ Cliquez pour r√©v√©ler ]",
                answer: "D√©finition l√©gale : <strong>r√©p√©tition + intention de nuire</strong>. Se r√©p√®te car : renforcement social (rires, likes), absence de cons√©quences, isolement progressif de la cible qui la rend plus vuln√©rable. C'est un <strong>cercle vicieux</strong> qu'il faut briser t√¥t."
            }
        ];

        const quizData = [
            {
                question: "Dans une situation de harc√®lement, qui a statistiquement le plus de pouvoir pour l'arr√™ter ?",
                options: [
                    "La victime qui doit se d√©fendre",
                    "L'auteur qui doit d√©cider d'arr√™ter",
                    "Les t√©moins qui peuvent intervenir",
                    "Les adultes uniquement"
                ],
                correct: 2,
                feedback: "Les t√©moins sont la cl√©. L'auteur cherche un public et une validation. Si les t√©moins r√©agissent n√©gativement, le 'b√©n√©fice' dispara√Æt. Un seul t√©moin qui dit 'Stop, c'est pas dr√¥le' peut tout changer. C'est pourquoi pHARe forme les t√©moins."
            },
            {
                question: "L√©a regarde Maxime se faire moquer tous les jours. Elle ne dit rien mais n'approuve pas. Elle est :",
                options: [
                    "Neutre, donc pas concern√©e",
                    "T√©moin passif, ce qui renforce le harc√®lement",
                    "Victime secondaire",
                    "D√©fenseure silencieuse"
                ],
                correct: 1,
                feedback: "Le silence EST un message. L'auteur interpr√®te l'absence de r√©action comme une approbation. La cible interpr√®te le silence comme un abandon. L√©a, sans le vouloir, participe √† la dynamique. √ätre 'neutre' n'existe pas face au harc√®lement."
            },
            {
                question: "Tom dit : 'C'est juste des blagues, il/elle n'a qu'√† pas √™tre aussi sensible.' C'est un exemple de :",
                options: [
                    "V√©rit√© objective",
                    "D√©sengagement moral (minimisation + blame de la victime)",
                    "D√©fense l√©gitime",
                    "Analyse pertinente"
                ],
                correct: 1,
                feedback: "Double m√©canisme : 1) MINIMISATION ('juste des blagues') pour r√©duire la gravit√©. 2) BLAME ('trop sensible') pour transf√©rer la responsabilit√© sur la cible. Ces phrases sont des red flags de d√©sengagement moral."
            },
            {
                question: "Pourquoi l'effet spectateur fait-il que plus il y a de t√©moins, moins on intervient ?",
                options: [
                    "Parce que les gens sont naturellement l√¢ches",
                    "Parce que la responsabilit√© se dilue ('quelqu'un d'autre va agir')",
                    "Parce qu'ils approuvent tous secr√®tement",
                    "Parce qu'ils ont peur physiquement"
                ],
                correct: 1,
                feedback: "C'est un biais cognitif universel, pas un d√©faut moral. 'Dilution de responsabilit√©' : chacun pense que les autres vont agir. Solution : se d√©signer soi-m√™me responsable ('JE vais intervenir') et interpeller quelqu'un pr√©cis ('TOI, appelle un adulte')."
            },
            {
                question: "Une situation devient du harc√®lement quand :",
                options: [
                    "C'est tr√®s violent physiquement",
                    "C'est r√©p√©t√© ET intentionnel (m√™me si 'l√©ger' √† chaque fois)",
                    "La victime pleure",
                    "√áa se passe uniquement en ligne"
                ],
                correct: 1,
                feedback: "D√©finition l√©gale : R√âP√âTITION + INTENTION DE NUIRE. Une moquerie isol√©e n'est pas du harc√®lement. Mais des 'petites' remarques quotidiennes sur le m√™me sujet = harc√®lement. L'accumulation fait le poison, pas la dose unique."
            }
        ];

        const scenarioData = [
            {
                title: "La Cantine",
                context: "Tous les jours, un groupe se moque de Nadia √† la cantine. Aujourd'hui, tu es √† c√¥t√©.",
                intro: "Le groupe lance des vannes sur les v√™tements de Nadia. Elle fait semblant de rien mais tu vois qu'elle mange de plus en plus vite pour partir. Trois autres √©l√®ves regardent sans r√©agir. Que fais-tu ?",
                choices: [
                    { text: "Tu ne fais rien. Ce n'est pas ton probl√®me et tu ne veux pas devenir la prochaine cible.", result: "Compr√©hensible mais dangereux. Tu deviens t√©moin passif : ton silence dit √† l'auteur 'je ne d√©sapprouve pas' et √† Nadia 'personne ne m'aidera'. Le harc√®lement continue.", impact: { intervention: -15, empathie: -10 } },
                    { text: "Tu t'assieds √† c√¥t√© de Nadia et tu lui parles normalement, ignorant le groupe.", result: "Excellente strat√©gie non-confrontationnelle. Tu ne d√©fies pas directement le groupe (moins de risque) mais tu envoies un signal fort : Nadia n'est PAS isol√©e. Tu brises la dynamique d'exclusion.", impact: { intervention: +25, empathie: +20 } },
                    { text: "Tu dis fort : 'Vous √™tes s√©rieux l√† ? C'est vraiment pas dr√¥le.'", result: "Intervention directe courageuse. Tu nommes le probl√®me publiquement. Risque : escalade possible. B√©n√©fice : tu d√©finis une norme sociale ('ce n'est pas acceptable'). Les autres t√©moins passifs peuvent maintenant s'appuyer sur toi.", impact: { intervention: +30, empathie: +15 } },
                    { text: "Tu pr√©viens discr√®tement un surveillant apr√®s le repas.", result: "Action valide et souvent sous-estim√©e. Tu actives le syst√®me de protection sans te mettre en danger. Important : le faire SYST√âMATIQUEMENT, pas juste une fois. La r√©p√©tition des signalements cr√©e une trace.", impact: { intervention: +20, empathie: +10 } }
                ]
            },
            {
                title: "Le Groupe WhatsApp",
                context: "Un groupe classe partage des memes moquant Hugo. √áa fait rire. Hugo n'est pas dans le groupe.",
                intro: "Les images sont dr√¥les objectivement, mais c'est toujours Hugo qui est vis√©. Quelqu'un √©crit 'mdrrr trop lui üòÇ'. Tu as 47 notifications de likes. Hugo ne sait peut-√™tre m√™me pas que ce groupe existe. Que fais-tu ?",
                choices: [
                    { text: "Tu likes aussi. C'est juste de l'humour, Hugo ne voit pas.", result: "Le cyberharc√®lement n'a pas besoin que la victime voie EN DIRECT. Les contenus circulent, quelqu'un finira par lui montrer, et la preuve de son humiliation existe pour toujours. Tu as particip√© activement.", impact: { intervention: -20, empathie: -25 } },
                    { text: "Tu ne likes pas mais tu restes dans le groupe sans rien dire.", result: "T√©moin passif num√©rique. Ton silence dans un espace o√π tout le monde like est presque une approbation. Tu ne fais pas de mal, mais tu ne fais pas de bien non plus.", impact: { intervention: -5, empathie: -5 } },
                    { text: "Tu √©cris : 'C'est un peu relou d'always viser Hugo non ?' puis tu quittes le groupe.", result: "Tu poses un acte fort : tu nommes le probl√®me ET tu te d√©solidarises. Quitter le groupe envoie un signal visible. Certains penseront 'ah ouais c'est vrai que c'est abus√©'. Tu s√®mes le doute.", impact: { intervention: +25, empathie: +20 } },
                    { text: "Tu fais des captures d'√©cran et tu en parles √† Hugo pour qu'il sache.", result: "Intention bonne mais attention : montrer √† Hugo peut lui faire tr√®s mal. Mieux : pr√©venir un adulte avec les preuves, qui g√©rera avec Hugo de fa√ßon accompagn√©e. Les captures sont pr√©cieuses.", impact: { intervention: +15, empathie: +5 } }
                ]
            },
            {
                title: "La Rumeur",
                context: "Une rumeur circule sur Yasmina. Tu sais que c'est faux car tu connais la vraie histoire.",
                intro: "La rumeur dit que Yasmina a fait quelque chose de honteux. Tu sais que c'est une d√©formation d'un √©v√©nement banal. Les gens parlent, commentent, jugent. Yasmina est de plus en plus absente. Tu es peut-√™tre le/la seul¬∑e √† conna√Ætre la v√©rit√©.",
                choices: [
                    { text: "Tu ne dis rien car tu ne veux pas t'impliquer dans des histoires.", result: "Tu poss√®des l'antidote (la v√©rit√©) et tu la gardes. La rumeur continue de faire des d√©g√¢ts. Yasmina souffre d'une injustice que TU pourrais corriger. L'inaction a un co√ªt moral.", impact: { intervention: -15, empathie: -20 } },
                    { text: "Tu r√©tablis la v√©rit√© publiquement devant ceux qui colportent la rumeur.", result: "Courage maximum. Tu prends le risque d'√™tre associ√©¬∑e √† la 'd√©fense' de Yasmina. Mais tu introduis le DOUTE dans la rumeur. Une fois le doute install√©, la rumeur perd son pouvoir.", impact: { intervention: +30, empathie: +25 } },
                    { text: "Tu vas voir Yasmina pour lui dire que tu sais la v√©rit√© et que tu la soutiens.", result: "Pr√©cieux pour Yasmina : elle sait qu'au moins UNE personne la croit. Le soutien priv√© est important mais ne stoppe pas la rumeur publique. Id√©alement, combine avec une action publique.", impact: { intervention: +15, empathie: +30 } },
                    { text: "Tu en parles √† un adulte de confiance en expliquant que tu connais la v√©rit√©.", result: "Tu d√©l√®gues √† quelqu'un qui a plus de pouvoir d'action. L'adulte peut intervenir officiellement, convoquer, r√©tablir. Tu prot√®ges Yasmina ET toi-m√™me.", impact: { intervention: +20, empathie: +15 } }
                ]
            }
        ];

        function encodeSaveCode(data) { return btoa(JSON.stringify(data)); }
        function decodeSaveCode(code) { try { return JSON.parse(atob(code)); } catch { return null; } }
        function getMasteryLevel(score) {
            if (score >= 450) return { level: "Expert", class: "mastery-expert" };
            if (score >= 280) return { level: "Confirm√©", class: "mastery-confirmed" };
            return { level: "En formation", class: "mastery-training" };
        }

        function App() {
            const [gameState, setGameState] = useState("intro");
            const [playerData, setPlayerData] = useState({ name: "", class: "", level: 1, score: 0, xp: 0, quizScore: 0, scenarioScore: 0, flashcardsViewed: 0, finished: false });
            const [currentFlashcard, setCurrentFlashcard] = useState(0);
            const [flashcardFlipped, setFlashcardFlipped] = useState(false);
            const [currentQuiz, setCurrentQuiz] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showQuizFeedback, setShowQuizFeedback] = useState(false);
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioChoice, setScenarioChoice] = useState(null);
            const [showScenarioResult, setShowScenarioResult] = useState(false);

            function startGame() {
                if (playerData.name.trim()) setGameState("flashcards");
            }

            function nextFlashcard() {
                if (currentFlashcard < flashcardsData.length - 1) {
                    setCurrentFlashcard(prev => prev + 1);
                    setFlashcardFlipped(false);
                    setPlayerData(prev => ({ ...prev, flashcardsViewed: Math.max(prev.flashcardsViewed, currentFlashcard + 2), xp: prev.xp + 12 }));
                } else {
                    setGameState("quiz");
                    setPlayerData(prev => ({ ...prev, level: 2, flashcardsViewed: flashcardsData.length, xp: prev.xp + 50 }));
                }
            }

            function prevFlashcard() { if (currentFlashcard > 0) { setCurrentFlashcard(prev => prev - 1); setFlashcardFlipped(false); } }

            function selectQuizAnswer(index) { if (!showQuizFeedback) setSelectedAnswer(index); }

            function validateQuizAnswer() {
                setShowQuizFeedback(true);
                if (selectedAnswer === quizData[currentQuiz].correct) {
                    setPlayerData(prev => ({ ...prev, score: prev.score + 30, quizScore: prev.quizScore + 30, xp: prev.xp + 30 }));
                }
            }

            function nextQuizQuestion() {
                if (currentQuiz < quizData.length - 1) {
                    setCurrentQuiz(prev => prev + 1);
                    setSelectedAnswer(null);
                    setShowQuizFeedback(false);
                } else {
                    setGameState("scenarios");
                    setPlayerData(prev => ({ ...prev, level: 3, xp: prev.xp + 60 }));
                }
            }

            function makeScenarioChoice(index) {
                setScenarioChoice(index);
                setShowScenarioResult(true);
                const choice = scenarioData[currentScenario].choices[index];
                const values = Object.values(choice.impact);
                const totalChange = Math.max(0, values.reduce((a, b) => a + b, 0));
                setPlayerData(prev => ({ ...prev, score: prev.score + totalChange, scenarioScore: prev.scenarioScore + totalChange, xp: prev.xp + 25 }));
            }

            function nextScenario() {
                if (currentScenario < scenarioData.length - 1) {
                    setCurrentScenario(prev => prev + 1);
                    setScenarioChoice(null);
                    setShowScenarioResult(false);
                } else {
                    setPlayerData(prev => ({ ...prev, finished: true, xp: prev.xp + 100 }));
                    setGameState("complete");
                }
            }

            function generateSaveCode() {
                return encodeSaveCode({
                    v: 1, d: new Date().toISOString(), m: MODULE_ID, mv: MODULE_VERSION,
                    n: playerData.name, c: playerData.class, l: 3, s: playerData.score,
                    x: playerData.xp, q: playerData.quizScore, sc: playerData.scenarioScore, f: true
                });
            }

            function copyCode() { navigator.clipboard.writeText(generateSaveCode()).then(() => alert("Code copi√© !")); }

            function renderIntro() {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("div", { className: "pillar-icon" }, "üë•"),
                        e("h1", { className: "glitch-title" }, "PIX-pHARe"),
                        e("div", { className: "subtitle" }, "Pilier Dynamiques de Groupe"),
                        e("div", { className: "module-badge" }, "MODULE 01")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üî∫"),
                            e("div", { className: "panel-title" }, MODULE_TITLE)
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "intro-screen" },
                                e("p", { style: { fontSize: "1.1rem", marginBottom: "20px" } }, 
                                    "Le harc√®lement n'est jamais un face-√†-face. C'est toujours une ", 
                                    e("strong", { style: { color: "var(--witness-purple)" } }, "dynamique de groupe"),
                                    "."
                                ),
                                e("div", { style: { margin: "25px 0" } },
                                    e("div", { className: "role-card role-harceleur" }, "üî¥ Auteur"),
                                    e("div", { className: "role-card role-victime" }, "üîµ Cible"),
                                    e("div", { className: "role-card role-temoins" }, "üü° T√©moins")
                                ),
                                e("p", { style: { color: "var(--text-secondary)", marginBottom: "30px" } }, 
                                    "Comprendre ces trois r√¥les et leurs interactions, c'est comprendre comment ", 
                                    e("strong", { style: { color: "var(--safety-green)" } }, "briser le cycle"),
                                    "."
                                ),
                                e("div", { className: "name-input-group" },
                                    e("input", {
                                        type: "text",
                                        className: "name-input",
                                        value: playerData.name,
                                        onChange: ev => setPlayerData(prev => ({ ...prev, name: ev.target.value })),
                                        placeholder: "Ton pr√©nom ou pseudo..."
                                    }),
                                    e("input", {
                                        type: "text",
                                        className: "name-input",
                                        value: playerData.class,
                                        onChange: ev => setPlayerData(prev => ({ ...prev, class: ev.target.value })),
                                        placeholder: "Ta classe (optionnel)..."
                                    })
                                ),
                                e("button", { className: "action-btn", onClick: startGame, disabled: !playerData.name.trim() }, "[ COMMENCER ]")
                            )
                        )
                    )
                );
            }

            function renderFlashcards() {
                const card = flashcardsData[currentFlashcard];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Niveau 1 : Cartographie")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node active" }, "1"),
                        e("div", { className: "progress-node" }, "2"),
                        e("div", { className: "progress-node" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Concept"), e("div", { className: "xp-value" }, `${currentFlashcard + 1}/${flashcardsData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üìö"),
                            e("div", { className: "panel-title" }, "Les M√©canismes")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "flashcard-container" },
                                e("div", { className: `flashcard ${flashcardFlipped ? "flipped" : ""}`, onClick: () => setFlashcardFlipped(!flashcardFlipped) },
                                    e("div", { className: "flashcard-face flashcard-front" },
                                        e("div", { className: `flashcard-role ${card.role}` }, card.role.toUpperCase()),
                                        e("div", { className: "flashcard-question" }, card.question),
                                        e("div", { className: "flashcard-hint" }, card.hint)
                                    ),
                                    e("div", { className: "flashcard-face flashcard-back" },
                                        e("div", { className: "flashcard-role", style: { background: "var(--safety-green)" } }, "COMPRIS"),
                                        e("div", { className: "flashcard-answer", dangerouslySetInnerHTML: { __html: card.answer } })
                                    )
                                )
                            ),
                            e("div", { className: "flashcard-nav" },
                                e("button", { className: "nav-btn", onClick: prevFlashcard, disabled: currentFlashcard === 0 }, "‚óÑ PR√âC"),
                                e("button", { className: "nav-btn", onClick: nextFlashcard }, currentFlashcard < flashcardsData.length - 1 ? "SUIV ‚ñ∫" : "NIVEAU 2 ‚ñ∫")
                            )
                        )
                    )
                );
            }

            function renderQuiz() {
                const question = quizData[currentQuiz];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Niveau 2 : Analyse")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node active" }, "2"),
                        e("div", { className: "progress-node" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Score"), e("div", { className: "xp-value" }, playerData.quizScore)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Question"), e("div", { className: "xp-value" }, `${currentQuiz + 1}/${quizData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üî¨"),
                            e("div", { className: "panel-title" }, "Analyseur de Dynamiques")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "quiz-question" }, question.question),
                            e("div", { className: "quiz-options" },
                                question.options.map((opt, idx) => {
                                    let optClass = "quiz-option";
                                    if (showQuizFeedback) {
                                        if (idx === question.correct) optClass += " correct";
                                        else if (idx === selectedAnswer) optClass += " incorrect";
                                    } else if (idx === selectedAnswer) optClass += " selected";
                                    return e("div", { key: idx, className: optClass, onClick: () => selectQuizAnswer(idx) },
                                        e("div", { className: "option-marker" }, String.fromCharCode(65 + idx)),
                                        e("div", { className: "option-text" }, opt)
                                    );
                                })
                            ),
                            showQuizFeedback && e("div", { className: `feedback-box ${selectedAnswer !== question.correct ? "incorrect-feedback" : ""}` },
                                e("div", { className: "feedback-title" }, selectedAnswer === question.correct ? "‚úì ANALYSE CORRECTE" : "‚úó √Ä REVOIR"),
                                e("p", null, question.feedback)
                            ),
                            e("div", { style: { textAlign: "center", marginTop: "25px" } },
                                !showQuizFeedback ?
                                    e("button", { className: "action-btn", onClick: validateQuizAnswer, disabled: selectedAnswer === null }, "[ VALIDER ]") :
                                    e("button", { className: "action-btn", onClick: nextQuizQuestion }, currentQuiz < quizData.length - 1 ? "[ SUIVANT ]" : "[ NIVEAU 3 ]")
                            )
                        )
                    )
                );
            }

            function renderScenarios() {
                const scenario = scenarioData[currentScenario];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Niveau 3 : Simulation")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node active" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP Total"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Score"), e("div", { className: "xp-value" }, playerData.score)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Sc√©nario"), e("div", { className: "xp-value" }, `${currentScenario + 1}/${scenarioData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üéØ"),
                            e("div", { className: "panel-title" }, scenario.title)
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "scenario-context" }, scenario.context),
                            e("div", { className: "scenario-intro" }, scenario.intro),
                            !showScenarioResult ?
                                e("div", null, scenario.choices.map((choice, idx) =>
                                    e("button", { key: idx, className: "choice-btn", onClick: () => makeScenarioChoice(idx) }, choice.text)
                                )) :
                                e("div", { className: "choice-result" },
                                    e("p", { style: { marginBottom: "15px", lineHeight: "1.7" } }, scenario.choices[scenarioChoice].result),
                                    e("div", { className: "impact-score" },
                                        Object.entries(scenario.choices[scenarioChoice].impact).map(([key, val]) =>
                                            e("div", { key: key, className: `impact-item ${val > 0 ? "positive" : "negative"}` }, `${key}: ${val > 0 ? "+" : ""}${val}`)
                                        )
                                    ),
                                    e("div", { style: { textAlign: "center", marginTop: "25px" } },
                                        e("button", { className: "action-btn", onClick: nextScenario }, currentScenario < scenarioData.length - 1 ? "[ SUIVANT ]" : "[ TERMINER ]")
                                    )
                                )
                        )
                    )
                );
            }

            function renderComplete() {
                const mastery = getMasteryLevel(playerData.score);
                const saveCode = generateSaveCode();
                return e("div", { className: "app-container" },
                    e("div", { className: "completion-screen" },
                        e("div", { className: "completion-icon" }, "üî∫"),
                        e("h1", { className: "completion-title" }, "TRIANGLE MA√éTRIS√â"),
                        e("p", { style: { fontSize: "1.2rem", color: "var(--text-secondary)", marginBottom: "15px" } }, `Bravo ${playerData.name} ! Tu comprends les dynamiques de groupe.`),
                        e("div", { className: `mastery-badge ${mastery.class}` }, mastery.level),
                        e("div", { className: "stats-grid" },
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.score), e("div", { className: "stat-label" }, "Score Total")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.xp), e("div", { className: "stat-label" }, "XP Gagn√©s")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.quizScore), e("div", { className: "stat-label" }, "Analyse")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.scenarioScore), e("div", { className: "stat-label" }, "Simulation"))
                        ),
                        e("div", { className: "save-code-box" },
                            e("div", { className: "save-code-label" }, "üìã TON CODE DE SAUVEGARDE (pour le Module 02) :"),
                            e("div", { className: "save-code" }, saveCode),
                            e("button", { className: "copy-btn", onClick: copyCode }, "Copier le code")
                        ),
                        e("div", { className: "content-panel", style: { marginTop: "30px", textAlign: "left" } },
                            e("div", { className: "panel-header" },
                                e("div", { className: "panel-icon" }, "üéì"),
                                e("div", { className: "panel-title" }, "Comp√©tences acquises")
                            ),
                            e("div", { className: "panel-body" },
                                e("p", null, "Tu sais maintenant identifier les ", e("strong", { style: { color: "var(--witness-purple)" } }, "trois r√¥les"), " du harc√®lement et comprendre leurs interactions."),
                                e("p", { style: { marginTop: "15px" } }, "Tu connais ", e("strong", null, "l'effet spectateur"), " et le ", e("strong", null, "d√©sengagement moral"), " - les m√©canismes qui perp√©tuent le cycle."),
                                e("p", { style: { marginTop: "15px" } }, "Dans le Module 02, tu d√©couvriras ", e("strong", { style: { color: "var(--safety-green)" } }, "le pouvoir des t√©moins"), " et les techniques concr√®tes d'intervention.")
                            )
                        )
                    )
                );
            }

            switch (gameState) {
                case "intro": return renderIntro();
                case "flashcards": return renderFlashcards();
                case "quiz": return renderQuiz();
                case "scenarios": return renderScenarios();
                case "complete": return renderComplete();
                default: return renderIntro();
            }
        }

        ReactDOM.createRoot(document.getElementById("root")).render(e(App));
    </script>
</body>
</html>
