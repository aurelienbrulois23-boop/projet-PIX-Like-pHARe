<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIX-pHARe | Module NUM√âRIQUE 02 - Les Architectes de l'Ombre</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&family=Share+Tech+Mono&display=swap');
        
        :root {
            --neon-red: #ff0044;
            --neon-yellow: #ffcc00;
            --neon-purple: #9933ff;
            --neon-cyan: #00ffff;
            --dark-bg: #0d0a14;
            --darker-bg: #060409;
            --panel-bg: rgba(13, 10, 20, 0.95);
            --text-primary: #f0e6ff;
            --text-secondary: #9988bb;
            --glow-red: 0 0 20px rgba(255, 0, 68, 0.5);
            --glow-yellow: 0 0 20px rgba(255, 204, 0, 0.5);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Warning stripes background */
        .warning-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 30px,
                    rgba(255, 0, 68, 0.03) 30px,
                    rgba(255, 0, 68, 0.03) 60px
                );
            pointer-events: none;
            z-index: 0;
        }
        
        /* Matrix rain effect */
        .matrix-column {
            position: fixed;
            top: -100%;
            font-family: 'Share Tech Mono', monospace;
            font-size: 14px;
            color: rgba(255, 0, 68, 0.15);
            writing-mode: vertical-rl;
            animation: matrixFall 15s linear infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes matrixFall {
            0% { transform: translateY(0); }
            100% { transform: translateY(200vh); }
        }
        
        .app-container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }
        
        .header::before {
            content: '‚ö†Ô∏è ZONE RESTREINTE ‚ö†Ô∏è';
            display: block;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.8rem;
            color: var(--neon-red);
            letter-spacing: 5px;
            margin-bottom: 20px;
            animation: warningPulse 2s infinite;
        }
        
        @keyframes warningPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .glitch-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 900;
            color: var(--neon-red);
            text-shadow: 
                0 0 10px var(--neon-red),
                0 0 20px var(--neon-red),
                3px 3px 0 var(--neon-yellow),
                -3px -3px 0 var(--neon-purple);
            letter-spacing: 3px;
            animation: glitchText 4s infinite;
        }
        
        @keyframes glitchText {
            0%, 85%, 100% { transform: translate(0); filter: hue-rotate(0deg); }
            86% { transform: translate(-3px, 2px); filter: hue-rotate(90deg); }
            88% { transform: translate(3px, -2px); filter: hue-rotate(-90deg); }
            90% { transform: translate(-2px, -1px); filter: hue-rotate(45deg); }
            92% { transform: translate(2px, 1px); filter: hue-rotate(0deg); }
        }
        
        .subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            color: var(--neon-yellow);
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .module-badge {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 30px;
            background: linear-gradient(135deg, rgba(255, 0, 68, 0.3), rgba(153, 51, 255, 0.3));
            border: 2px solid var(--neon-red);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--neon-red);
            position: relative;
            overflow: hidden;
        }
        
        .module-badge::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Progress indicator */
        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .progress-node {
            width: 50px;
            height: 50px;
            border: 2px solid var(--text-secondary);
            background: var(--darker-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-secondary);
            position: relative;
            transition: all 0.4s ease;
        }
        
        .progress-node::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 1px solid transparent;
            transition: all 0.4s ease;
        }
        
        .progress-node.active {
            border-color: var(--neon-red);
            color: var(--neon-red);
            box-shadow: var(--glow-red);
        }
        
        .progress-node.active::before {
            border-color: var(--neon-red);
            animation: borderPulse 2s infinite;
        }
        
        @keyframes borderPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .progress-node.completed {
            border-color: var(--neon-yellow);
            background: rgba(255, 204, 0, 0.2);
            color: var(--neon-yellow);
        }
        
        /* XP Display */
        .xp-display {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .xp-box {
            background: var(--panel-bg);
            border: 1px solid var(--neon-purple);
            padding: 15px 25px;
            text-align: center;
            position: relative;
        }
        
        .xp-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--neon-red), var(--neon-purple));
        }
        
        .xp-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .xp-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--neon-yellow);
            text-shadow: var(--glow-yellow);
        }
        
        /* Content panels */
        .content-panel {
            background: var(--panel-bg);
            border: 1px solid rgba(255, 0, 68, 0.3);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .content-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--neon-red), var(--neon-yellow), var(--neon-purple));
        }
        
        .content-panel::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--neon-red), transparent);
        }
        
        .panel-header {
            background: rgba(255, 0, 68, 0.1);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 0, 68, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .panel-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--neon-red), var(--neon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            border-radius: 50%;
            box-shadow: var(--glow-red);
        }
        
        .panel-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--neon-red);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .panel-body {
            padding: 25px;
        }
        
        /* Unlock screen */
        .unlock-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .lock-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: lockShake 0.5s ease-in-out;
        }
        
        @keyframes lockShake {
            0%, 100% { transform: rotate(0); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        
        .unlock-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: var(--neon-red);
            margin-bottom: 15px;
        }
        
        .code-input {
            width: 100%;
            max-width: 500px;
            padding: 15px;
            background: var(--darker-bg);
            border: 2px solid var(--neon-purple);
            color: var(--text-primary);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85rem;
            margin: 20px auto;
            display: block;
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--neon-red);
            box-shadow: var(--glow-red);
        }
        
        .error-msg {
            color: var(--neon-red);
            font-family: 'Share Tech Mono', monospace;
            margin-top: 15px;
            padding: 10px;
            border: 1px solid var(--neon-red);
            background: rgba(255, 0, 68, 0.1);
        }
        
        /* Flashcards */
        .flashcard-container {
            perspective: 1000px;
            margin-bottom: 20px;
        }
        
        .flashcard {
            position: relative;
            width: 100%;
            min-height: 220px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            min-height: 220px;
            backface-visibility: hidden;
            border: 2px solid var(--neon-red);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 25px;
            background: var(--darker-bg);
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, rgba(255, 0, 68, 0.15), rgba(153, 51, 255, 0.15));
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, rgba(255, 204, 0, 0.15), rgba(255, 0, 68, 0.1));
            border-color: var(--neon-yellow);
        }
        
        .flashcard-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 12px;
            background: var(--neon-red);
            color: var(--darker-bg);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .flashcard-question {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--neon-red);
            text-align: center;
            margin-bottom: 15px;
        }
        
        .flashcard-hint {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85rem;
            color: var(--neon-purple);
            text-align: center;
        }
        
        .flashcard-answer {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-primary);
        }
        
        .flashcard-answer strong {
            color: var(--neon-yellow);
        }
        
        .flashcard-answer code {
            background: rgba(255, 0, 68, 0.2);
            padding: 2px 6px;
            color: var(--neon-red);
            font-family: 'Share Tech Mono', monospace;
        }
        
        .flashcard-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .nav-btn {
            background: transparent;
            border: 2px solid var(--neon-purple);
            color: var(--neon-purple);
            padding: 12px 30px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .nav-btn:hover {
            background: rgba(153, 51, 255, 0.2);
            box-shadow: 0 0 15px rgba(153, 51, 255, 0.5);
        }
        
        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        /* Quiz styles */
        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 0, 68, 0.1);
            border-left: 4px solid var(--neon-red);
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .quiz-option {
            background: var(--darker-bg);
            border: 1px solid var(--text-secondary);
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .quiz-option:hover:not(.selected):not(.correct):not(.incorrect) {
            border-color: var(--neon-purple);
            background: rgba(153, 51, 255, 0.1);
            transform: translateX(5px);
        }
        
        .quiz-option.selected {
            border-color: var(--neon-purple);
            background: rgba(153, 51, 255, 0.2);
        }
        
        .quiz-option.correct {
            border-color: var(--neon-yellow);
            background: rgba(255, 204, 0, 0.2);
        }
        
        .quiz-option.incorrect {
            border-color: var(--neon-red);
            background: rgba(255, 0, 68, 0.2);
        }
        
        .option-marker {
            width: 35px;
            height: 35px;
            border: 2px solid currentColor;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .option-text {
            flex: 1;
            font-size: 0.95rem;
        }
        
        .feedback-box {
            margin-top: 20px;
            padding: 20px;
            border-left: 4px solid var(--neon-yellow);
            background: rgba(255, 204, 0, 0.1);
        }
        
        .feedback-box.incorrect-feedback {
            border-color: var(--neon-red);
            background: rgba(255, 0, 68, 0.1);
        }
        
        .feedback-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--neon-yellow);
            margin-bottom: 10px;
        }
        
        .feedback-box.incorrect-feedback .feedback-title {
            color: var(--neon-red);
        }
        
        /* Scenario styles */
        .scenario-intro {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(153, 51, 255, 0.1);
            border: 1px solid rgba(153, 51, 255, 0.3);
        }
        
        .scenario-context {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--neon-yellow);
            margin-bottom: 15px;
            padding: 12px 15px;
            background: rgba(255, 204, 0, 0.1);
            border: 1px dashed var(--neon-yellow);
        }
        
        .dark-pattern-example {
            margin: 20px 0;
            padding: 20px;
            background: var(--darker-bg);
            border: 2px solid var(--neon-red);
            position: relative;
        }
        
        .dark-pattern-example::before {
            content: 'EXEMPLE DARK PATTERN';
            position: absolute;
            top: -12px;
            left: 15px;
            background: var(--neon-red);
            color: var(--darker-bg);
            padding: 3px 10px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.7rem;
            font-weight: 700;
        }
        
        .choice-btn {
            display: block;
            width: 100%;
            background: var(--darker-bg);
            border: 1px solid var(--text-secondary);
            padding: 18px 20px;
            margin-bottom: 12px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            color: var(--text-primary);
        }
        
        .choice-btn:hover {
            border-color: var(--neon-red);
            background: rgba(255, 0, 68, 0.1);
            transform: translateX(5px);
        }
        
        .choice-result {
            margin-top: 20px;
            padding: 20px;
            background: var(--darker-bg);
            border: 1px solid var(--neon-yellow);
        }
        
        .impact-score {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .impact-item {
            padding: 8px 15px;
            background: rgba(153, 51, 255, 0.1);
            border: 1px solid var(--neon-purple);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85rem;
        }
        
        .impact-item.positive {
            border-color: var(--neon-yellow);
            color: var(--neon-yellow);
        }
        
        .impact-item.negative {
            border-color: var(--neon-red);
            color: var(--neon-red);
        }
        
        /* Primary action button */
        .action-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--neon-red), var(--neon-purple));
            color: white;
            border: none;
            padding: 15px 40px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 0, 68, 0.5);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Completion screen */
        .completion-screen {
            text-align: center;
            padding: 50px 20px;
        }
        
        .completion-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: iconGlow 2s ease-in-out infinite;
        }
        
        @keyframes iconGlow {
            0%, 100% { filter: drop-shadow(0 0 10px var(--neon-yellow)); }
            50% { filter: drop-shadow(0 0 30px var(--neon-yellow)); }
        }
        
        .completion-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            color: var(--neon-yellow);
            text-shadow: var(--glow-yellow);
            margin-bottom: 15px;
        }
        
        .completion-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: var(--panel-bg);
            border: 1px solid var(--neon-purple);
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--neon-yellow);
        }
        
        .stat-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-top: 5px;
        }
        
        .save-code-box {
            background: var(--darker-bg);
            border: 2px solid var(--neon-yellow);
            padding: 25px;
            margin: 30px 0;
        }
        
        .save-code-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--neon-yellow);
            margin-bottom: 10px;
        }
        
        .save-code {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--neon-purple);
            word-break: break-all;
            background: rgba(153, 51, 255, 0.1);
            padding: 15px;
            border: 1px dashed var(--neon-purple);
        }
        
        .copy-btn {
            margin-top: 15px;
            background: transparent;
            border: 1px solid var(--neon-yellow);
            color: var(--neon-yellow);
            padding: 10px 25px;
            font-family: 'Share Tech Mono', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background: rgba(255, 204, 0, 0.2);
        }
        
        /* Mastery badge */
        .mastery-badge {
            display: inline-block;
            padding: 10px 25px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            border: 2px solid;
            margin-top: 15px;
        }
        
        .mastery-expert {
            color: var(--neon-yellow);
            border-color: var(--neon-yellow);
            box-shadow: var(--glow-yellow);
        }
        
        .mastery-confirmed {
            color: var(--neon-purple);
            border-color: var(--neon-purple);
        }
        
        .mastery-training {
            color: var(--neon-red);
            border-color: var(--neon-red);
        }
        
        /* Mobile responsive */
        @media (max-width: 600px) {
            .glitch-title {
                font-size: 1.5rem;
                letter-spacing: 2px;
            }
            
            .header::before {
                font-size: 0.65rem;
                letter-spacing: 3px;
            }
            
            .progress-node {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .xp-display {
                gap: 12px;
            }
            
            .xp-box {
                padding: 10px 15px;
            }
            
            .panel-body {
                padding: 15px;
            }
            
            .flashcard-face {
                padding: 20px 15px;
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="warning-bg"></div>
    
    <!-- Matrix rain effect -->
    <div class="matrix-column" style="left: 5%; animation-delay: 0s;">01001 DARK 10110</div>
    <div class="matrix-column" style="left: 15%; animation-delay: -3s;">PATTERN 11001</div>
    <div class="matrix-column" style="left: 25%; animation-delay: -6s;">00101 TRAP 10</div>
    <div class="matrix-column" style="left: 35%; animation-delay: -9s;">DESIGN 01100</div>
    <div class="matrix-column" style="left: 55%; animation-delay: -2s;">10010 CLICK 01</div>
    <div class="matrix-column" style="left: 65%; animation-delay: -5s;">ACCEPT 11010</div>
    <div class="matrix-column" style="left: 75%; animation-delay: -8s;">01101 TRAP 00</div>
    <div class="matrix-column" style="left: 85%; animation-delay: -11s;">HOOK 10101 01</div>
    <div class="matrix-column" style="left: 95%; animation-delay: -4s;">00110 DARK 11</div>
    
    <div id="root"></div>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script>
        const { useState, useEffect } = React;
        const e = React.createElement;

        // Module data
        const MODULE_ID = "NUMERIQUE_02";
        const MODULE_VERSION = "1.0";
        const MODULE_TITLE = "Les Architectes de l'Ombre";
        const PREREQUISITE_MODULE = "NUMERIQUE_01";
        
        // Flashcards data - Dark Patterns
        const flashcardsData = [
            {
                tag: "CONFIRMSHAMING",
                question: "Qu'est-ce que le 'Confirmshaming' ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Technique qui <strong>culpabilise</strong> l'utilisateur qui refuse une offre. Exemple : bouton 'Non merci, je pr√©f√®re payer plus cher' au lieu de 'Refuser'. Le refus devient un aveu de b√™tise ou d'√©go√Øsme. Objectif : transformer le 'non' en honte."
            },
            {
                tag: "ROACH MOTEL",
                question: "Qu'est-ce qu'un 'Roach Motel' (Pi√®ge √† cafards) ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Design o√π il est <strong>facile d'entrer mais quasi-impossible de sortir</strong>. S'inscrire = 1 clic. Se d√©sinscrire = 15 √©tapes, email au support, d√©lai de 30 jours, rappels culpabilisants. Amazon Prime, abonnements fitness, newsletters sont des exemples classiques."
            },
            {
                tag: "BAIT & SWITCH",
                question: "Qu'est-ce que le 'Bait and Switch' ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "L'utilisateur essaie de faire une action A, mais d√©clenche en fait l'action B. Exemple : cliquer sur 'X' pour fermer une pub mais √ßa ouvre le lien. Ou : <strong>bouton 'Annuler' qui confirme</strong>. Exploitation de nos automatismes visuels."
            },
            {
                tag: "FORCED CONTINUITY",
                question: "Qu'est-ce que la 'Forced Continuity' ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Essai gratuit qui se transforme <strong>automatiquement en abonnement payant</strong>. La carte bancaire est d√©j√† enregistr√©e, le premier pr√©l√®vement arrive sans rappel visible. 48% des utilisateurs oublient d'annuler avant la fin de l'essai."
            },
            {
                tag: "MISDIRECTION",
                question: "Comment fonctionne la 'Misdirection' (D√©tournement d'attention) ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Le design <strong>attire l'≈ìil sur un √©l√©ment</strong> pour cacher un autre. Gros bouton vert 'ACCEPTER TOUT' vs petit lien gris 'Param√©trer les cookies'. L'≈ìil va naturellement vers le contraste fort et la couleur vive."
            },
            {
                tag: "HIDDEN COSTS",
                question: "Que sont les 'Hidden Costs' (Co√ªts cach√©s) ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Frais r√©v√©l√©s <strong>uniquement √† la derni√®re √©tape</strong> du processus d'achat : frais de livraison, frais de service, taxes, assurances pr√©-coch√©es. Apr√®s avoir investi du temps, l'utilisateur est plus enclin √† payer ces surco√ªts ('sunk cost fallacy')."
            },
            {
                tag: "TRICK QUESTIONS",
                question: "Comment fonctionnent les 'Trick Questions' ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Questions formul√©es pour <strong>induire en erreur</strong>. Exemple : 'D√©cochez cette case si vous ne souhaitez pas ne pas recevoir nos offres'. Double n√©gation = confusion. Ou cases pr√©-coch√©es avec libell√©s invers√©s. L'utilisateur clique sans lire."
            },
            {
                tag: "PRIVACY ZUCKERING",
                question: "Qu'est-ce que le 'Privacy Zuckering' ?",
                hint: "[ Cliquez pour r√©v√©ler la manipulation ]",
                answer: "Nomm√© d'apr√®s Mark Zuckerberg. Interface qui <strong>pousse √† partager plus de donn√©es</strong> qu'on ne le souhaite. Param√®tres de confidentialit√© complexes, options 'recommand√©es' = tout public, incitations sociales √† r√©v√©ler plus ('Compl√©tez votre profil √† 80%!')."
            }
        ];

        // Quiz data
        const quizData = [
            {
                question: "Pourquoi le bouton 'Accepter tous les cookies' est-il g√©n√©ralement vert et bien visible ?",
                options: [
                    "Parce que le vert est la couleur standard pour 'OK'",
                    "Pour exploiter nos automatismes et nous faire cliquer sans r√©fl√©chir",
                    "Pour respecter les normes d'accessibilit√©",
                    "Par convention esth√©tique"
                ],
                correct: 1,
                feedback: "C'est un dark pattern de 'Misdirection' : le cerveau associe vert = positif = cliquer. Le bouton 'Refuser' ou 'Param√©trer' est volontairement moins visible (gris, plus petit, texte seul). L'objectif est de collecter le maximum de donn√©es avec le minimum de friction."
            },
            {
                question: "Un site affiche 'Plus que 2 articles en stock !' et '15 personnes regardent ce produit'. Quel dark pattern est utilis√© ?",
                options: [
                    "Confirmshaming",
                    "Urgency/Scarcity (Urgence/Raret√© artificielle)",
                    "Bait and Switch",
                    "Roach Motel"
                ],
                correct: 1,
                feedback: "L'urgence artificielle exploite notre 'peur de rater' (FOMO). Ces chiffres sont souvent faux ou exag√©r√©s. Booking.com a √©t√© sanctionn√© pour ces pratiques. Effet : court-circuiter la r√©flexion, pousser √† l'achat impulsif ('vite, avant qu'il soit trop tard!')."
            },
            {
                question: "Vous voulez supprimer votre compte Facebook. Que va-t-il se passer ?",
                options: [
                    "Suppression imm√©diate en 1 clic",
                    "Confirmation simple par email",
                    "Parcours de 15+ √©tapes avec rappels √©motionnels et d√©lai de 30 jours",
                    "Transfert vers un conseiller"
                ],
                correct: 2,
                feedback: "Exemple classique de 'Roach Motel' : Facebook montre des photos d'amis ('Ils vont vous manquer'), demande les raisons, propose des alternatives (d√©sactivation), impose un d√©lai de 30 jours pendant lequel une seule connexion annule la suppression. Friction maximale pour partir."
            },
            {
                question: "Une newsletter propose 'Non merci, je n'aime pas √©conomiser de l'argent' comme option de refus. C'est :",
                options: [
                    "De l'humour marketing innocent",
                    "Du Confirmshaming - culpabilisation du refus",
                    "Une obligation l√©gale de clart√©",
                    "Un bug d'interface"
                ],
                correct: 1,
                feedback: "Le Confirmshaming transforme le 'non' en aveu de stupidit√© ou d'√©go√Øsme. Variantes : 'Non, je pr√©f√®re rester mal inform√©', 'Non, ma sant√© ne m'int√©resse pas'. Objectif : rendre le refus psychologiquement co√ªteux pour maximiser les conversions."
            },
            {
                question: "Quelle loi europ√©enne tente de lutter contre ces pratiques ?",
                options: [
                    "La loi Hadopi",
                    "Le RGPD (R√®glement G√©n√©ral sur la Protection des Donn√©es)",
                    "La directive Copyright",
                    "Le Digital Services Act uniquement"
                ],
                correct: 1,
                feedback: "Le RGPD exige un consentement 'libre, sp√©cifique, √©clair√© et univoque'. En th√©orie, refuser les cookies doit √™tre aussi facile qu'accepter. En pratique, beaucoup de sites violent ce principe. La CNIL peut infliger des amendes jusqu'√† 4% du chiffre d'affaires mondial."
            }
        ];

        // Scenario data
        const scenarioData = [
            {
                title: "Le Labyrinthe du D√©sabonnement",
                context: "Tu veux annuler un abonnement √† un service de streaming que tu n'utilises plus.",
                intro: "Apr√®s 10 minutes de recherche, tu trouves enfin le bouton 'G√©rer l'abonnement'. Tu cliques. Une page s'ouvre : '√ätes-vous s√ªr ? Voici tout ce que vous allez perdre...' suivie d'une liste de 20 avantages. Ensuite : 'Avant de partir, que diriez-vous d'une pause de 3 mois gratuits ?' Puis : 'Confirmez par email'. L'email contient un lien qui expire dans 24h. Que fais-tu ?",
                choices: [
                    {
                        text: "Tu abandonnes, c'est trop compliqu√©. Tu resteras abonn√©.",
                        result: "Tu viens de tomber dans le pi√®ge du 'Roach Motel'. Chaque obstacle (√©motionnel, temporel, administratif) est con√ßu pour d√©courager. Les √©tudes montrent que 40% des utilisateurs abandonnent face √† ce type de friction.",
                        impact: { lucidite: -15, autonomie: -20 }
                    },
                    {
                        text: "Tu pers√©v√®res jusqu'au bout, m√™me si √ßa prend 30 minutes.",
                        result: "Bravo pour ta d√©termination ! Tu as vaincu le dark pattern. Mais note le temps perdu - c'est exactement ce qu'ils voulaient. La prochaine fois, tu y r√©fl√©chiras √† deux fois avant de t'abonner.",
                        impact: { lucidite: +15, autonomie: +20 }
                    },
                    {
                        text: "Tu acceptes les '3 mois gratuits' pour voir.",
                        result: "Pi√®ge dans le pi√®ge. Dans 3 mois, tu auras oubli√© et le pr√©l√®vement reprendra. C'est la 'Forced Continuity' combin√©e au 'Roach Motel'. Double manipulation.",
                        impact: { lucidite: -5, autonomie: -10 }
                    },
                    {
                        text: "Tu bloques le pr√©l√®vement via ta banque et tu signales √† la DGCCRF.",
                        result: "Approche radicale mais l√©gitime. Tu reprends le contr√¥le financier et tu alertes les autorit√©s sur une pratique potentiellement ill√©gale. C'est le niveau 'r√©sistance active'.",
                        impact: { lucidite: +25, autonomie: +25 }
                    }
                ]
            },
            {
                title: "Le Pi√®ge des Cookies",
                context: "Tu arrives sur un site d'information. Un bandeau cookies appara√Æt.",
                intro: "Le bandeau affiche : un gros bouton vert 'TOUT ACCEPTER', et en tout petit, en gris, 'Param√©trer mes choix'. Tu cliques sur 'Param√©trer'. Une liste de 47 'partenaires' appara√Æt, chacun avec des cases pr√©-coch√©es. Pour tout d√©sactiver, il faudrait 47 clics individuels. Il n'y a pas de bouton 'Tout refuser'. Que fais-tu ?",
                choices: [
                    {
                        text: "Tu cliques sur 'Tout accepter' parce que c'est plus rapide.",
                        result: "Tu viens de donner ton consentement √† 47 entreprises pour tracker ta navigation, cr√©er ton profil publicitaire, et revendre tes donn√©es. La friction √©tait calcul√©e pour te faire abandonner.",
                        impact: { lucidite: -10, autonomie: -15 }
                    },
                    {
                        text: "Tu fais les 47 clics pour tout d√©sactiver.",
                        result: "Respect. Tu as investi du temps pour prot√©ger tes donn√©es. Mais ce design est probablement ill√©gal (RGPD exige que refuser soit aussi facile qu'accepter). Tu pourrais signaler ce site √† la CNIL.",
                        impact: { lucidite: +15, autonomie: +10 }
                    },
                    {
                        text: "Tu quittes le site et cherches l'info ailleurs.",
                        result: "Vote avec tes pieds. En refusant d'utiliser des sites aux pratiques douteuses, tu envoies un signal √©conomique. Si assez de gens font pareil, les sites devront changer.",
                        impact: { lucidite: +20, autonomie: +20 }
                    },
                    {
                        text: "Tu installes une extension anti-cookies et tu bloques tout automatiquement.",
                        result: "Solution technique √©l√©gante. Des extensions comme 'I don't care about cookies' ou 'Consent-O-Matic' automatisent le refus. Tu reprends le contr√¥le sans perdre de temps.",
                        impact: { lucidite: +25, autonomie: +25 }
                    }
                ]
            },
            {
                title: "L'Urgence Artificielle",
                context: "Tu cherches un billet de train pour les vacances.",
                intro: "Le site affiche : '‚ö†Ô∏è Plus que 3 places √† ce prix !', 'üî• 12 personnes consultent ce trajet', 'Prix garanti pendant 10:00 minutes' avec un compteur qui d√©file. Le prix augmente de 15‚Ç¨ pendant que tu r√©fl√©chis. Ton c≈ìur s'acc√©l√®re. Que d√©cides-tu ?",
                choices: [
                    {
                        text: "Tu ach√®tes imm√©diatement avant que le prix n'augmente encore.",
                        result: "Tu as c√©d√© √† l'urgence artificielle. Ces chiffres sont souvent faux ou manipul√©s. Le 'compteur' et les 'places restantes' sont des dark patterns de scarcit√©. Tu as pay√© peut-√™tre plus cher qu'en cherchant calmement.",
                        impact: { lucidite: -15, autonomie: -10 }
                    },
                    {
                        text: "Tu ouvres une fen√™tre de navigation priv√©e et tu rev√©rifies les prix.",
                        result: "Excellent r√©flexe ! Les sites utilisent les cookies pour tracker tes recherches et augmenter les prix ('dynamic pricing'). En navigation priv√©e, tu vois souvent le 'vrai' prix sans historique.",
                        impact: { lucidite: +25, autonomie: +20 }
                    },
                    {
                        text: "Tu compares sur d'autres sites (SNCF direct, Trainline, etc.).",
                        result: "Bonne strat√©gie. Les comparateurs ajoutent souvent des frais. Aller sur le site officiel peut r√©v√©ler des prix diff√©rents. La comparaison neutralise l'urgence artificielle.",
                        impact: { lucidite: +20, autonomie: +15 }
                    },
                    {
                        text: "Tu fermes le site et tu reviens demain pour voir si le prix a vraiment chang√©.",
                        result: "Test empirique de l'urgence. Souvent, le prix est identique ou m√™me inf√©rieur le lendemain. L'urgence √©tait factice. Tu as d√©samorc√© la manipulation par le temps.",
                        impact: { lucidite: +20, autonomie: +20 }
                    }
                ]
            }
        ];

        // Utility functions
        function encodeSaveCode(data) {
            return btoa(JSON.stringify(data));
        }

        function decodeSaveCode(code) {
            try {
                return JSON.parse(atob(code));
            } catch {
                return null;
            }
        }

        function getMasteryLevel(score) {
            if (score >= 500) return { level: "Expert", class: "mastery-expert" };
            if (score >= 300) return { level: "Confirm√©", class: "mastery-confirmed" };
            return { level: "En formation", class: "mastery-training" };
        }

        // Main App Component
        function App() {
            const [gameState, setGameState] = useState("unlock");
            const [playerData, setPlayerData] = useState({
                name: "",
                class: "",
                level: 1,
                score: 0,
                xp: 0,
                quizScore: 0,
                scenarioScore: 0,
                flashcardsViewed: 0,
                finished: false
            });
            
            const [unlockCode, setUnlockCode] = useState("");
            const [unlockError, setUnlockError] = useState("");
            
            const [currentFlashcard, setCurrentFlashcard] = useState(0);
            const [flashcardFlipped, setFlashcardFlipped] = useState(false);
            
            const [currentQuiz, setCurrentQuiz] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showQuizFeedback, setShowQuizFeedback] = useState(false);
            
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioChoice, setScenarioChoice] = useState(null);
            const [showScenarioResult, setShowScenarioResult] = useState(false);

            // Verify unlock code
            function verifyUnlockCode() {
                const decoded = decodeSaveCode(unlockCode);
                
                if (!decoded) {
                    setUnlockError("Code invalide. V√©rifie que tu as copi√© le code complet.");
                    return;
                }
                
                if (decoded.m !== PREREQUISITE_MODULE) {
                    setUnlockError(`Ce code provient du module ${decoded.m}. Tu as besoin du code de ${PREREQUISITE_MODULE}.`);
                    return;
                }
                
                if (!decoded.f) {
                    setUnlockError("Tu n'as pas termin√© le module pr√©c√©dent. Retourne le compl√©ter !");
                    return;
                }
                
                // Success - transfer player data
                setPlayerData(prev => ({
                    ...prev,
                    name: decoded.n || "",
                    class: decoded.c || ""
                }));
                setGameState("intro");
            }

            // Skip unlock for testing (remove in production)
            function skipUnlock() {
                setPlayerData(prev => ({
                    ...prev,
                    name: "Testeur",
                    class: "Debug"
                }));
                setGameState("intro");
            }

            // Start game
            function startGame() {
                setGameState("flashcards");
            }

            // Flashcard navigation
            function nextFlashcard() {
                if (currentFlashcard < flashcardsData.length - 1) {
                    setCurrentFlashcard(prev => prev + 1);
                    setFlashcardFlipped(false);
                    setPlayerData(prev => ({
                        ...prev,
                        flashcardsViewed: Math.max(prev.flashcardsViewed, currentFlashcard + 2),
                        xp: prev.xp + 12
                    }));
                } else {
                    setGameState("quiz");
                    setPlayerData(prev => ({
                        ...prev,
                        level: 2,
                        flashcardsViewed: flashcardsData.length,
                        xp: prev.xp + 40
                    }));
                }
            }

            function prevFlashcard() {
                if (currentFlashcard > 0) {
                    setCurrentFlashcard(prev => prev - 1);
                    setFlashcardFlipped(false);
                }
            }

            // Quiz logic
            function selectQuizAnswer(index) {
                if (showQuizFeedback) return;
                setSelectedAnswer(index);
            }

            function validateQuizAnswer() {
                setShowQuizFeedback(true);
                const isCorrect = selectedAnswer === quizData[currentQuiz].correct;
                if (isCorrect) {
                    setPlayerData(prev => ({
                        ...prev,
                        score: prev.score + 30,
                        quizScore: prev.quizScore + 30,
                        xp: prev.xp + 30
                    }));
                }
            }

            function nextQuizQuestion() {
                if (currentQuiz < quizData.length - 1) {
                    setCurrentQuiz(prev => prev + 1);
                    setSelectedAnswer(null);
                    setShowQuizFeedback(false);
                } else {
                    setGameState("scenarios");
                    setPlayerData(prev => ({
                        ...prev,
                        level: 3,
                        xp: prev.xp + 60
                    }));
                }
            }

            // Scenario logic
            function makeScenarioChoice(index) {
                setScenarioChoice(index);
                setShowScenarioResult(true);
                
                const choice = scenarioData[currentScenario].choices[index];
                const luciditeChange = choice.impact.lucidite || 0;
                const autonomieChange = choice.impact.autonomie || 0;
                const totalChange = Math.max(0, luciditeChange + autonomieChange);
                
                setPlayerData(prev => ({
                    ...prev,
                    score: prev.score + totalChange,
                    scenarioScore: prev.scenarioScore + totalChange,
                    xp: prev.xp + 25
                }));
            }

            function nextScenario() {
                if (currentScenario < scenarioData.length - 1) {
                    setCurrentScenario(prev => prev + 1);
                    setScenarioChoice(null);
                    setShowScenarioResult(false);
                } else {
                    completeModule();
                }
            }

            function completeModule() {
                setPlayerData(prev => ({
                    ...prev,
                    finished: true,
                    xp: prev.xp + 100
                }));
                setGameState("complete");
            }

            // Generate save code
            function generateSaveCode() {
                const saveData = {
                    v: 1,
                    d: new Date().toISOString(),
                    m: MODULE_ID,
                    mv: MODULE_VERSION,
                    n: playerData.name,
                    c: playerData.class,
                    l: 3,
                    s: playerData.score,
                    x: playerData.xp,
                    q: playerData.quizScore,
                    sc: playerData.scenarioScore,
                    f: true
                };
                return encodeSaveCode(saveData);
            }

            // Copy to clipboard
            function copyCode() {
                const code = generateSaveCode();
                navigator.clipboard.writeText(code).then(() => {
                    alert("Code copi√© !");
                });
            }

            // Render functions
            function renderUnlock() {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, "PIX-pHARe"),
                        e("div", { className: "subtitle" }, "Pilier Num√©rique"),
                        e("div", { className: "module-badge" }, "MODULE 02 - VERROUILL√â")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üîê"),
                            e("div", { className: "panel-title" }, "Authentification requise")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "unlock-screen" },
                                e("div", { className: "lock-icon" }, "üîí"),
                                e("h2", { className: "unlock-title" }, MODULE_TITLE),
                                e("p", { style: { color: "var(--text-secondary)", marginBottom: "20px" } }, 
                                    "Ce module n√©cessite d'avoir compl√©t√© le Module 01 'La Machine √† Attention'."
                                ),
                                e("p", { style: { color: "var(--text-secondary)" } }, 
                                    "Entre ton code de sauvegarde du module pr√©c√©dent :"
                                ),
                                e("input", {
                                    type: "text",
                                    className: "code-input",
                                    value: unlockCode,
                                    onChange: (ev) => setUnlockCode(ev.target.value),
                                    placeholder: "Colle ton code ici..."
                                }),
                                unlockError && e("div", { className: "error-msg" }, unlockError),
                                e("div", { style: { marginTop: "25px" } },
                                    e("button", {
                                        className: "action-btn",
                                        onClick: verifyUnlockCode,
                                        disabled: !unlockCode.trim()
                                    }, "[ D√âVERROUILLER ]")
                                ),
                                e("div", { style: { marginTop: "30px", paddingTop: "20px", borderTop: "1px solid var(--text-secondary)" } },
                                    e("p", { style: { color: "var(--text-secondary)", fontSize: "0.85rem" } }, 
                                        "Tu n'as pas encore fait le Module 01 ?"
                                    ),
                                    e("p", { style: { marginTop: "10px" } },
                                        e("a", { 
                                            href: "#",
                                            style: { color: "var(--neon-purple)", textDecoration: "none" }
                                        }, "‚Üí Retourner au Module 01")
                                    )
                                )
                            )
                        )
                    )
                );
            }

            function renderIntro() {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, "PIX-pHARe"),
                        e("div", { className: "subtitle" }, "Pilier Num√©rique"),
                        e("div", { className: "module-badge" }, "MODULE 02")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "‚ö†Ô∏è"),
                            e("div", { className: "panel-title" }, MODULE_TITLE)
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "scenario-intro" },
                                e("p", null, "Bienvenue ", e("strong", null, playerData.name), " dans le Module 02."),
                                e("p", { style: { marginTop: "15px" } }, 
                                    "Tu as compris comment les plateformes capturent ton attention. Maintenant, d√©couvre les ", 
                                    e("strong", { style: { color: "var(--neon-red)" } }, "Dark Patterns"), 
                                    " : ces interfaces truqu√©es qui manipulent tes d√©cisions sans que tu t'en rendes compte."
                                ),
                                e("p", { style: { marginTop: "15px" } }, 
                                    "Confirmshaming, Roach Motel, Bait & Switch, Hidden Costs... Derri√®re ces noms se cachent des techniques de manipulation psychologique utilis√©es par les plus grandes entreprises du monde."
                                )
                            ),
                            e("div", { className: "dark-pattern-example" },
                                e("p", { style: { marginBottom: "15px" } }, "Exemple : Tu veux refuser une newsletter."),
                                e("p", null, 
                                    "Option A : ", 
                                    e("span", { style: { color: "var(--neon-yellow)", fontWeight: "bold" } }, "Oui, je veux rester inform√©")
                                ),
                                e("p", { style: { marginTop: "8px" } }, 
                                    "Option B : ", 
                                    e("span", { style: { color: "var(--text-secondary)", fontSize: "0.9rem" } }, "Non, je pr√©f√®re rester ignorant et rater toutes les opportunit√©s")
                                ),
                                e("p", { style: { marginTop: "15px", fontStyle: "italic", color: "var(--neon-red)" } }, 
                                    "‚Üí C'est du Confirmshaming : culpabiliser celui qui refuse."
                                )
                            ),
                            e("div", { style: { textAlign: "center", marginTop: "30px" } },
                                e("button", {
                                    className: "action-btn",
                                    onClick: startGame
                                }, "[ COMMENCER L'INFILTRATION ]")
                            )
                        )
                    )
                );
            }

            function renderFlashcards() {
                const card = flashcardsData[currentFlashcard];
                
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Niveau 1 : Catalogage")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node active" }, "1"),
                        e("div", { className: "progress-node" }, "2"),
                        e("div", { className: "progress-node" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "XP"),
                            e("div", { className: "xp-value" }, playerData.xp)
                        ),
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "Pattern"),
                            e("div", { className: "xp-value" }, `${currentFlashcard + 1}/${flashcardsData.length}`)
                        )
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üìã"),
                            e("div", { className: "panel-title" }, "Dossier Dark Patterns")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "flashcard-container" },
                                e("div", { 
                                    className: `flashcard ${flashcardFlipped ? "flipped" : ""}`,
                                    onClick: () => setFlashcardFlipped(!flashcardFlipped)
                                },
                                    e("div", { className: "flashcard-face flashcard-front" },
                                        e("div", { className: "flashcard-tag" }, card.tag),
                                        e("div", { className: "flashcard-question" }, card.question),
                                        e("div", { className: "flashcard-hint" }, card.hint)
                                    ),
                                    e("div", { className: "flashcard-face flashcard-back" },
                                        e("div", { className: "flashcard-tag", style: { background: "var(--neon-yellow)", color: "var(--darker-bg)" } }, "EXPOS√â"),
                                        e("div", { 
                                            className: "flashcard-answer",
                                            dangerouslySetInnerHTML: { __html: card.answer }
                                        })
                                    )
                                )
                            ),
                            e("div", { className: "flashcard-nav" },
                                e("button", {
                                    className: "nav-btn",
                                    onClick: prevFlashcard,
                                    disabled: currentFlashcard === 0
                                }, "‚óÑ PR√âC"),
                                e("button", {
                                    className: "nav-btn",
                                    onClick: nextFlashcard
                                }, currentFlashcard < flashcardsData.length - 1 ? "SUIV ‚ñ∫" : "NIVEAU 2 ‚ñ∫")
                            )
                        )
                    )
                );
            }

            function renderQuiz() {
                const question = quizData[currentQuiz];
                
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Niveau 2 : D√©tection")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node active" }, "2"),
                        e("div", { className: "progress-node" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "XP"),
                            e("div", { className: "xp-value" }, playerData.xp)
                        ),
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "Score"),
                            e("div", { className: "xp-value" }, playerData.quizScore)
                        ),
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "Question"),
                            e("div", { className: "xp-value" }, `${currentQuiz + 1}/${quizData.length}`)
                        )
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üîç"),
                            e("div", { className: "panel-title" }, "Scanner de Manipulation")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "quiz-question" }, question.question),
                            e("div", { className: "quiz-options" },
                                question.options.map((opt, idx) => {
                                    let optClass = "quiz-option";
                                    if (showQuizFeedback) {
                                        if (idx === question.correct) optClass += " correct";
                                        else if (idx === selectedAnswer) optClass += " incorrect";
                                    } else if (idx === selectedAnswer) {
                                        optClass += " selected";
                                    }
                                    
                                    return e("div", {
                                        key: idx,
                                        className: optClass,
                                        onClick: () => selectQuizAnswer(idx)
                                    },
                                        e("div", { className: "option-marker" }, String.fromCharCode(65 + idx)),
                                        e("div", { className: "option-text" }, opt)
                                    );
                                })
                            ),
                            showQuizFeedback && e("div", { 
                                className: `feedback-box ${selectedAnswer !== question.correct ? "incorrect-feedback" : ""}`
                            },
                                e("div", { className: "feedback-title" }, 
                                    selectedAnswer === question.correct ? "‚úì PATTERN IDENTIFI√â" : "‚úó MANIPULATION R√âUSSIE"
                                ),
                                e("p", null, question.feedback)
                            ),
                            e("div", { style: { textAlign: "center", marginTop: "25px" } },
                                !showQuizFeedback ? 
                                    e("button", {
                                        className: "action-btn",
                                        onClick: validateQuizAnswer,
                                        disabled: selectedAnswer === null
                                    }, "[ ANALYSER ]") :
                                    e("button", {
                                        className: "action-btn",
                                        onClick: nextQuizQuestion
                                    }, currentQuiz < quizData.length - 1 ? "[ SUIVANT ]" : "[ NIVEAU 3 ]")
                            )
                        )
                    )
                );
            }

            function renderScenarios() {
                const scenario = scenarioData[currentScenario];
                
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Niveau 3 : R√©sistance")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node active" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "XP Total"),
                            e("div", { className: "xp-value" }, playerData.xp)
                        ),
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "Score"),
                            e("div", { className: "xp-value" }, playerData.score)
                        ),
                        e("div", { className: "xp-box" },
                            e("div", { className: "xp-label" }, "Mission"),
                            e("div", { className: "xp-value" }, `${currentScenario + 1}/${scenarioData.length}`)
                        )
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üéØ"),
                            e("div", { className: "panel-title" }, scenario.title)
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "scenario-context" }, scenario.context),
                            e("div", { className: "scenario-intro" }, scenario.intro),
                            !showScenarioResult ? 
                                e("div", { className: "choices" },
                                    scenario.choices.map((choice, idx) => 
                                        e("button", {
                                            key: idx,
                                            className: "choice-btn",
                                            onClick: () => makeScenarioChoice(idx)
                                        }, choice.text)
                                    )
                                ) :
                                e("div", { className: "choice-result" },
                                    e("p", { style: { marginBottom: "15px" } }, scenario.choices[scenarioChoice].result),
                                    e("div", { className: "impact-score" },
                                        Object.entries(scenario.choices[scenarioChoice].impact).map(([key, val]) =>
                                            e("div", { 
                                                key: key,
                                                className: `impact-item ${val > 0 ? "positive" : "negative"}`
                                            }, `${key}: ${val > 0 ? "+" : ""}${val}`)
                                        )
                                    ),
                                    e("div", { style: { textAlign: "center", marginTop: "25px" } },
                                        e("button", {
                                            className: "action-btn",
                                            onClick: nextScenario
                                        }, currentScenario < scenarioData.length - 1 ? "[ SUIVANT ]" : "[ TERMINER ]")
                                    )
                                )
                        )
                    )
                );
            }

            function renderComplete() {
                const mastery = getMasteryLevel(playerData.score);
                const saveCode = generateSaveCode();
                
                return e("div", { className: "app-container" },
                    e("div", { className: "completion-screen" },
                        e("div", { className: "completion-icon" }, "üõ°Ô∏è"),
                        e("h1", { className: "completion-title" }, "IMMUNIT√â ACQUISE"),
                        e("p", { className: "completion-subtitle" }, 
                            `Bravo ${playerData.name} ! Tu as ma√Ætris√© "${MODULE_TITLE}"`
                        ),
                        e("div", { className: `mastery-badge ${mastery.class}` }, mastery.level),
                        e("div", { className: "stats-grid" },
                            e("div", { className: "stat-card" },
                                e("div", { className: "stat-value" }, playerData.score),
                                e("div", { className: "stat-label" }, "Score Total")
                            ),
                            e("div", { className: "stat-card" },
                                e("div", { className: "stat-value" }, playerData.xp),
                                e("div", { className: "stat-label" }, "XP Gagn√©s")
                            ),
                            e("div", { className: "stat-card" },
                                e("div", { className: "stat-value" }, playerData.quizScore),
                                e("div", { className: "stat-label" }, "D√©tection")
                            ),
                            e("div", { className: "stat-card" },
                                e("div", { className: "stat-value" }, playerData.scenarioScore),
                                e("div", { className: "stat-label" }, "R√©sistance")
                            )
                        ),
                        e("div", { className: "save-code-box" },
                            e("div", { className: "save-code-label" }, "üìã TON CODE DE SAUVEGARDE (pour le Module 03) :"),
                            e("div", { className: "save-code" }, saveCode),
                            e("button", { 
                                className: "copy-btn",
                                onClick: copyCode
                            }, "Copier le code")
                        ),
                        e("div", { className: "content-panel", style: { marginTop: "30px", textAlign: "left" } },
                            e("div", { className: "panel-header" },
                                e("div", { className: "panel-icon" }, "üéì"),
                                e("div", { className: "panel-title" }, "Comp√©tences d√©bloqu√©es")
                            ),
                            e("div", { className: "panel-body" },
                                e("p", null, "Tu sais maintenant reconna√Ætre les ", e("strong", { style: { color: "var(--neon-red)" } }, "Dark Patterns"), " les plus courants : Confirmshaming, Roach Motel, Bait & Switch, Misdirection, Hidden Costs..."),
                                e("p", { style: { marginTop: "15px" } }, "Tu comprends que ces interfaces ne sont ", e("strong", null, "pas des erreurs"), " mais des ", e("strong", null, "designs intentionnels"), " pour manipuler tes d√©cisions."),
                                e("p", { style: { marginTop: "15px" } }, "Dans le Module 03, tu d√©couvriras les ", e("strong", { style: { color: "var(--neon-purple)" } }, "Bulles de Filtre"), " et les ", e("strong", { style: { color: "var(--neon-purple)" } }, "Chambres d'√âcho"), " : comment l'algorithme construit ta vision du monde.")
                            )
                        )
                    )
                );
            }

            // Main render
            switch (gameState) {
                case "unlock": return renderUnlock();
                case "intro": return renderIntro();
                case "flashcards": return renderFlashcards();
                case "quiz": return renderQuiz();
                case "scenarios": return renderScenarios();
                case "complete": return renderComplete();
                default: return renderUnlock();
            }
        }

        // Mount app
        ReactDOM.createRoot(document.getElementById("root")).render(e(App));
    </script>
</body>
</html>
