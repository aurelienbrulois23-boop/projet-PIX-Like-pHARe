<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIX-pHARe | Module GROUPE 05 - Leader Positif [CERTIFICATION]</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&family=Share+Tech+Mono&display=swap');
        
        :root {
            --leader-gold: #fbbf24;
            --leader-amber: #f59e0b;
            --leader-emerald: #10b981;
            --leader-cyan: #06b6d4;
            --leader-purple: #8b5cf6;
            --void-dark: #0a0a14;
            --deep-dark: #050508;
            --panel-bg: rgba(10, 10, 20, 0.95);
            --text-primary: #fffbf0;
            --text-secondary: #a0a0b0;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--void-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .leader-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(ellipse at 50% 20%, rgba(251, 191, 36, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 30% 70%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: leaderGlow 8s ease-in-out infinite;
        }
        
        @keyframes leaderGlow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        .stars-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, rgba(251, 191, 36, 0.8), transparent),
                radial-gradient(2px 2px at 40% 70%, rgba(16, 185, 129, 0.6), transparent),
                radial-gradient(2px 2px at 70% 20%, rgba(139, 92, 246, 0.6), transparent),
                radial-gradient(1px 1px at 90% 50%, rgba(251, 191, 36, 0.5), transparent),
                radial-gradient(1px 1px at 10% 90%, rgba(6, 182, 212, 0.5), transparent);
            background-size: 200px 200px;
            animation: starsTwinkle 4s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes starsTwinkle {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .app-container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header { text-align: center; padding: 40px 20px; }
        
        .pillar-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.8));
            animation: crownPulse 3s ease-in-out infinite;
        }
        
        @keyframes crownPulse {
            0%, 100% { transform: scale(1) rotate(0deg); filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.8)); }
            50% { transform: scale(1.1) rotate(5deg); filter: drop-shadow(0 0 35px rgba(251, 191, 36, 1)); }
        }
        
        .glitch-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--leader-gold), var(--leader-emerald), var(--leader-purple), var(--leader-cyan));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 5s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            color: var(--leader-gold);
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 4px;
        }
        
        .module-badge {
            display: inline-block;
            margin-top: 20px;
            padding: 15px 40px;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(139, 92, 246, 0.2));
            border: 3px solid var(--leader-gold);
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--leader-gold);
            text-transform: uppercase;
            letter-spacing: 3px;
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.4);
        }
        
        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .progress-node {
            width: 60px; height: 60px;
            border: 3px solid var(--text-secondary);
            background: var(--deep-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--text-secondary);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            transition: all 0.4s ease;
        }
        
        .progress-node.active {
            border-color: var(--leader-gold);
            color: var(--leader-gold);
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.6);
            animation: hexPulse 2s ease-in-out infinite;
        }
        
        @keyframes hexPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .progress-node.completed {
            border-color: var(--leader-emerald);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(251, 191, 36, 0.2));
            color: var(--leader-emerald);
        }
        
        .xp-display {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .xp-box {
            background: var(--panel-bg);
            border: 2px solid var(--leader-gold);
            padding: 15px 25px;
            text-align: center;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.2);
        }
        
        .xp-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }
        
        .xp-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--leader-gold);
        }
        
        .content-panel {
            background: var(--panel-bg);
            border: 2px solid rgba(251, 191, 36, 0.4);
            border-radius: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .content-panel::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--leader-gold), var(--leader-emerald), var(--leader-purple), var(--leader-cyan), var(--leader-gold));
            background-size: 200% 100%;
            animation: rainbowBar 3s linear infinite;
        }
        
        @keyframes rainbowBar {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .panel-header {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(139, 92, 246, 0.1));
            padding: 20px 25px;
            border-bottom: 1px solid rgba(251, 191, 36, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .panel-icon {
            width: 55px; height: 55px;
            background: linear-gradient(135deg, var(--leader-gold), var(--leader-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        }
        
        .panel-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--leader-gold);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .panel-body { padding: 25px; }
        
        .unlock-screen { text-align: center; padding: 40px 20px; }
        .lock-icon { font-size: 4rem; margin-bottom: 20px; animation: crownPulse 3s ease-in-out infinite; }
        .unlock-title { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: var(--leader-gold); margin-bottom: 15px; }
        
        .code-input {
            width: 100%;
            max-width: 500px;
            padding: 15px;
            background: var(--deep-dark);
            border: 2px solid var(--leader-gold);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Share Tech Mono', monospace;
            margin: 20px auto;
            display: block;
        }
        
        .code-input:focus { outline: none; border-color: var(--leader-emerald); box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
        
        .error-msg { color: #ef4444; font-family: 'Share Tech Mono', monospace; margin-top: 15px; padding: 10px; border: 1px solid #ef4444; border-radius: 10px; background: rgba(239, 68, 68, 0.1); }
        
        .synthesis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .synthesis-card {
            background: var(--deep-dark);
            border: 2px solid;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .synthesis-card.m1 { border-color: #ef4444; }
        .synthesis-card.m2 { border-color: var(--leader-amber); }
        .synthesis-card.m3 { border-color: var(--leader-purple); }
        .synthesis-card.m4 { border-color: var(--leader-emerald); }
        
        .synthesis-title { font-family: 'Orbitron', sans-serif; font-size: 0.85rem; margin-bottom: 8px; }
        .synthesis-card.m1 .synthesis-title { color: #ef4444; }
        .synthesis-card.m2 .synthesis-title { color: var(--leader-amber); }
        .synthesis-card.m3 .synthesis-title { color: var(--leader-purple); }
        .synthesis-card.m4 .synthesis-title { color: var(--leader-emerald); }
        
        .synthesis-content { font-size: 0.85rem; color: var(--text-secondary); }
        
        .flashcard-container { perspective: 1200px; margin-bottom: 20px; }
        
        .flashcard {
            position: relative;
            width: 100%;
            min-height: 280px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .flashcard.flipped { transform: rotateY(180deg); }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            min-height: 280px;
            backface-visibility: hidden;
            border: 3px solid var(--leader-gold);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 25px;
            background: var(--deep-dark);
        }
        
        .flashcard-front { background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(139, 92, 246, 0.05)); }
        
        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(251, 191, 36, 0.1));
            border-color: var(--leader-emerald);
        }
        
        .flashcard-badge {
            position: absolute;
            top: 15px; right: 15px;
            padding: 8px 18px;
            background: linear-gradient(135deg, var(--leader-gold), var(--leader-purple));
            color: var(--deep-dark);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            border-radius: 20px;
        }
        
        .flashcard-question { font-family: 'Orbitron', sans-serif; font-size: 1.1rem; font-weight: 600; color: var(--leader-gold); text-align: center; margin-bottom: 15px; }
        .flashcard-hint { font-family: 'Share Tech Mono', monospace; font-size: 0.85rem; color: var(--leader-cyan); text-align: center; }
        .flashcard-answer { font-size: 1rem; line-height: 1.7; color: var(--text-primary); }
        .flashcard-answer strong { color: var(--leader-emerald); }
        .flashcard-answer .concept { color: var(--leader-gold); font-family: 'Orbitron', sans-serif; font-size: 0.9rem; }
        
        .flashcard-nav { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        
        .nav-btn {
            background: transparent;
            border: 2px solid var(--leader-gold);
            color: var(--leader-gold);
            padding: 12px 30px;
            font-family: 'Share Tech Mono', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            border-radius: 25px;
        }
        
        .nav-btn:hover { background: rgba(251, 191, 36, 0.2); box-shadow: 0 0 20px rgba(251, 191, 36, 0.4); }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        
        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(139, 92, 246, 0.05));
            border-left: 4px solid var(--leader-gold);
            border-radius: 0 15px 15px 0;
        }
        
        .quiz-options { display: flex; flex-direction: column; gap: 12px; }
        
        .quiz-option {
            background: var(--deep-dark);
            border: 2px solid var(--text-secondary);
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .quiz-option:hover:not(.selected):not(.correct):not(.incorrect) { border-color: var(--leader-gold); background: rgba(251, 191, 36, 0.1); transform: translateX(5px); }
        .quiz-option.selected { border-color: var(--leader-gold); background: rgba(251, 191, 36, 0.15); }
        .quiz-option.correct { border-color: var(--leader-emerald); background: rgba(16, 185, 129, 0.2); }
        .quiz-option.incorrect { border-color: #ef4444; background: rgba(239, 68, 68, 0.15); }
        
        .option-marker { width: 35px; height: 35px; border: 2px solid currentColor; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron', sans-serif; font-weight: 700; }
        .option-text { flex: 1; font-size: 0.95rem; }
        
        .feedback-box { margin-top: 20px; padding: 20px; border-left: 4px solid var(--leader-emerald); border-radius: 0 15px 15px 0; background: rgba(16, 185, 129, 0.1); }
        .feedback-box.incorrect-feedback { border-color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        .feedback-title { font-family: 'Orbitron', sans-serif; font-weight: 700; color: var(--leader-emerald); margin-bottom: 10px; }
        .feedback-box.incorrect-feedback .feedback-title { color: #ef4444; }
        
        .scenario-context { font-family: 'Share Tech Mono', monospace; font-size: 0.9rem; color: var(--leader-gold); margin-bottom: 15px; padding: 12px 15px; background: rgba(251, 191, 36, 0.1); border: 1px dashed var(--leader-gold); border-radius: 10px; }
        .scenario-intro { font-size: 1rem; line-height: 1.7; margin-bottom: 25px; padding: 20px; background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(139, 92, 246, 0.05)); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 15px; }
        
        .choice-btn {
            display: block;
            width: 100%;
            background: var(--deep-dark);
            border: 2px solid var(--text-secondary);
            border-radius: 12px;
            padding: 18px 20px;
            margin-bottom: 12px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            color: var(--text-primary);
        }
        
        .choice-btn:hover { border-color: var(--leader-gold); background: rgba(251, 191, 36, 0.1); transform: translateX(5px); }
        
        .choice-result { margin-top: 20px; padding: 20px; background: var(--deep-dark); border: 2px solid var(--leader-emerald); border-radius: 15px; }
        .impact-score { display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap; }
        .impact-item { padding: 8px 15px; background: rgba(251, 191, 36, 0.1); border: 1px solid var(--leader-gold); border-radius: 20px; font-family: 'Share Tech Mono', monospace; font-size: 0.85rem; }
        .impact-item.positive { border-color: var(--leader-emerald); color: var(--leader-emerald); }
        .impact-item.negative { border-color: #ef4444; color: #ef4444; }
        
        .action-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--leader-gold), var(--leader-purple));
            color: var(--deep-dark);
            border: none;
            padding: 15px 40px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            border-radius: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
        }
        
        .action-btn:hover { transform: scale(1.05); box-shadow: 0 0 40px rgba(251, 191, 36, 0.6); }
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        .completion-screen { text-align: center; padding: 50px 20px; }
        .completion-icon { font-size: 5rem; margin-bottom: 20px; animation: crownPulse 3s ease-in-out infinite; }
        
        .completion-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--leader-gold), var(--leader-emerald), var(--leader-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }
        
        .certificate-frame {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(139, 92, 246, 0.1));
            border: 4px solid var(--leader-gold);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
            box-shadow: 0 0 40px rgba(251, 191, 36, 0.3);
        }
        
        .certificate-frame::before, .certificate-frame::after {
            content: '‚òÖ';
            position: absolute;
            font-size: 2rem;
            color: var(--leader-gold);
        }
        
        .certificate-frame::before { top: 10px; left: 10px; }
        .certificate-frame::after { bottom: 10px; right: 10px; }
        
        .certificate-title { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: var(--leader-gold); margin-bottom: 15px; }
        .certificate-name { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--leader-emerald); margin: 15px 0; }
        .certificate-text { color: var(--text-secondary); margin: 10px 0; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 20px; margin: 30px 0; }
        
        .stat-card {
            background: var(--panel-bg);
            border: 2px solid var(--leader-gold);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value { font-family: 'Orbitron', sans-serif; font-size: 2rem; font-weight: 700; color: var(--leader-gold); }
        .stat-label { font-family: 'Share Tech Mono', monospace; font-size: 0.8rem; color: var(--text-secondary); text-transform: uppercase; margin-top: 5px; }
        
        .save-code-box { background: var(--deep-dark); border: 3px solid var(--leader-emerald); border-radius: 15px; padding: 25px; margin: 30px 0; box-shadow: 0 0 30px rgba(16, 185, 129, 0.3); }
        .save-code-label { font-family: 'Share Tech Mono', monospace; font-size: 0.9rem; color: var(--leader-emerald); margin-bottom: 10px; }
        .save-code { font-family: 'Share Tech Mono', monospace; font-size: 0.7rem; color: var(--leader-gold); word-break: break-all; background: rgba(251, 191, 36, 0.1); padding: 15px; border-radius: 10px; border: 1px dashed var(--leader-gold); }
        
        .copy-btn { margin-top: 15px; background: transparent; border: 2px solid var(--leader-emerald); color: var(--leader-emerald); padding: 10px 25px; font-family: 'Share Tech Mono', monospace; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; }
        .copy-btn:hover { background: rgba(16, 185, 129, 0.2); }
        
        .mastery-badge {
            display: inline-block;
            padding: 15px 35px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 1rem;
            text-transform: uppercase;
            border: 3px solid;
            border-radius: 30px;
            margin-top: 15px;
        }
        
        .mastery-master { color: var(--leader-gold); border-color: var(--leader-gold); box-shadow: 0 0 30px rgba(251, 191, 36, 0.6); animation: masterGlow 2s ease-in-out infinite; }
        .mastery-expert { color: var(--leader-emerald); border-color: var(--leader-emerald); box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
        .mastery-confirmed { color: var(--leader-cyan); border-color: var(--leader-cyan); }
        
        @keyframes masterGlow {
            0%, 100% { box-shadow: 0 0 30px rgba(251, 191, 36, 0.6); }
            50% { box-shadow: 0 0 50px rgba(251, 191, 36, 0.9); }
        }
        
        @media (max-width: 600px) {
            .glitch-title { font-size: 1.5rem; }
            .progress-node { width: 50px; height: 50px; font-size: 1rem; }
            .panel-body { padding: 15px; }
            .flashcard-face { padding: 20px 15px; min-height: 300px; }
            .synthesis-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>
    <div class="leader-bg"></div>
    <div class="stars-overlay"></div>
    <div id="root"></div>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script>
        const { useState } = React;
        const e = React.createElement;

        const MODULE_ID = "GROUPE_05";
        const MODULE_TITLE = "Leader Positif";
        const PREREQUISITE_MODULE = "GROUPE_04";
        const PILLAR_ID = "GROUPE";
        
        const flashcardsData = [
            { badge: "SYNTH√àSE M01", question: "Rappel : Le Triangle du Harc√®lement", hint: "[ Cliquez pour r√©viser ]", answer: "Le harc√®lement est un ph√©nom√®ne <strong>public</strong> (<span class='concept'>85% devant t√©moins</span>) impliquant 3 p√¥les : Auteur, Cible, T√©moins. Les t√©moins sont la cl√© : quand l'un intervient, <span class='concept'>57% d'arr√™t en 10 secondes</span>." },
            { badge: "SYNTH√àSE M02", question: "Rappel : Les 5 √©tapes du t√©moin (Darley-Latan√©)", hint: "[ Cliquez pour r√©viser ]", answer: "<strong>1) PERCEVOIR</strong> l'incident ‚Üí <strong>2) INTERPR√âTER</strong> comme urgence ‚Üí <strong>3) ACCEPTER</strong> la responsabilit√© ‚Üí <strong>4) SAVOIR</strong> comment agir ‚Üí <strong>5) AGIR</strong>. Chaque √©tape = une barri√®re potentielle." },
            { badge: "SYNTH√àSE M03", question: "Rappel : Les 8 m√©canismes de d√©sengagement moral", hint: "[ Cliquez pour r√©viser ]", answer: "Justification morale, √âtiquetage euph√©misant, Comparaison avantageuse, D√©placement/Diffusion responsabilit√©, Distorsion cons√©quences, <strong>D√©shumanisation</strong> (le plus dangereux), Attribution faute. Reconna√Ætre ces phrases = les <span class='concept'>neutraliser</span>." },
            { badge: "SYNTH√àSE M04", question: "Rappel : Ce qui marche vraiment", hint: "[ Cliquez pour r√©viser ]", answer: "<strong>KiVa</strong> : retirer le 'profit social' de l'agresseur. <strong>Pr√©occupation Partag√©e</strong> : mobiliser l'empathie. <strong>Approches globales</strong> : -19% perp√©tration, -16% victimation. La punition seule = <span class='concept'>inefficace</span> √† long terme." },
            { badge: "INT√âGRATION", question: "Comment tous ces concepts s'articulent-ils ?", hint: "[ Cliquez pour la vision globale ]", answer: "Le <strong>Triangle</strong> montre QUI agit. Les <strong>5 √©tapes</strong> montrent O√ô intervenir. Les <strong>8 m√©canismes</strong> montrent COMMENT on se justifie. Les <strong>m√©thodes</strong> montrent COMMENT changer la donne. Tout est connect√©." },
            { badge: "TON R√îLE", question: "Qu'est-ce qu'un Leader Positif ?", hint: "[ Cliquez pour comprendre ]", answer: "Un Leader Positif = quelqu'un qui rend la <strong>d√©fense prestigieuse</strong> et cr√©e des <span class='concept'>normes de protection</span>. Tu ne peux pas contr√¥ler ce que font les autres, mais tu peux influencer ce qui est 'cool' dans ton groupe." },
            { badge: "TRANSMISSION", question: "Pourquoi transmettre ces savoirs est crucial ?", hint: "[ Cliquez pour comprendre ]", answer: "La connaissance ne suffit pas. Ce qui change les choses = <strong>les normes du groupe</strong>. Plus il y a de gens form√©s, plus les d√©fenseurs deviennent la norme et les renforceurs l'exception. Tu es un <span class='concept'>vecteur de changement</span>." },
            { badge: "CERTIFICATION", question: "Que signifie √™tre certifi√©¬∑e 'Leader Positif' ?", hint: "[ Cliquez pour comprendre ]", answer: "Tu as la <strong>connaissance</strong> (concepts), la <strong>lucidit√©</strong> (m√©canismes), les <strong>outils</strong> (m√©thodes) et la <strong>responsabilit√©</strong> (agir). Tu peux maintenant <span class='concept'>former les autres</span> et cr√©er des environnements plus s√ªrs." }
        ];

        const quizData = [
            { question: "INT√âGRATION : Un √©l√®ve dit 'C'est pas mon probl√®me, de toute fa√ßon tout le monde s'en fiche.' Combien de concepts du pilier identifiez-vous ?", options: ["1 concept (diffusion de responsabilit√©)", "2 concepts (diffusion + √©tape 3 bloqu√©e)", "3 concepts (diffusion + √©tape 3 + r√¥le de spectateur passif)", "Aucun, c'est juste de l'indiff√©rence"], correct: 2, feedback: "TROIS concepts ! Diffusion de responsabilit√© (Bandura), √âtape 3 bloqu√©e (Darley-Latan√©) ET r√¥le de spectateur passif (Salmivalli). Tous interconnect√©s. Cette phrase r√©v√®le plusieurs m√©canismes √† la fois." },
            { question: "INT√âGRATION : Pour transformer un 'renforceur' en 'd√©fenseur', quelle approche est la plus compl√®te ?", options: ["Le punir pour qu'il arr√™te de rire", "Lui expliquer les 8 m√©canismes de Bandura uniquement", "Combiner : conscience des m√©canismes + nouvelles normes + empathie affective", "L'ignorer et se concentrer sur la victime"], correct: 2, feedback: "Approche INT√âGR√âE. La conscience (module 3) permet de reconna√Ætre ses justifications. Les nouvelles normes (module 4) rendent la d√©fense 'cool'. L'empathie affective (module 4) cr√©e le ressenti. Les trois ensemble = transformation durable." },
            { question: "TRANSMISSION : Tu expliques le harc√®lement √† un¬∑e ami¬∑e. Quel ordre est le plus p√©dagogique ?", options: ["M√©thodes ‚Üí M√©canismes ‚Üí Triangle ‚Üí R√¥les", "Triangle et r√¥les ‚Üí √âtapes du t√©moin ‚Üí M√©canismes ‚Üí M√©thodes", "M√©canismes ‚Üí Triangle ‚Üí M√©thodes ‚Üí √âtapes", "L'ordre n'a pas d'importance"], correct: 1, feedback: "Progression logique : D'abord COMPRENDRE la situation (triangle, r√¥les), puis IDENTIFIER les blocages (√©tapes), puis RECONNA√éTRE les justifications (m√©canismes), enfin AGIR avec les bonnes m√©thodes. Du contexte vers l'action." },
            { question: "LEADER POSITIF : Comment cr√©er une norme de d√©fense sans autorit√© formelle (tu n'es pas prof) ?", options: ["Impossible sans pouvoir institutionnel", "Punir socialement les renforceurs", "Valoriser visiblement les comportements de d√©fense quand tu les vois", "Faire des affiches de sensibilisation"], correct: 2, feedback: "L'influence sociale fonctionne par MOD√âLISATION. Quand tu valorises ('c'est courageux ce que tu as fait'), tu associes la d√©fense √† un statut positif. Les autres voient que d√©fendre = reconnaissance. Pas besoin d'autorit√© formelle." },
            { question: "CERTIFICATION : Qu'est-ce qui distingue quelqu'un de 'form√©' de quelqu'un de 'certifi√© Leader Positif' ?", options: ["Le score au quiz", "La capacit√© √† transmettre et √† cr√©er des changements durables", "L'√¢ge", "L'approbation des adultes"], correct: 1, feedback: "La certification implique la TRANSMISSION. Conna√Ætre les concepts = form√©. √ätre capable de les expliquer aux autres ET de cr√©er des normes positives dans son environnement = Leader Positif. C'est un passage de 'savoir' √† 'faire savoir et faire faire'." }
        ];

        const scenarioData = [
            { title: "Le Premier Pas d'Ambassadeur", context: "Tu es sollicit√©¬∑e pour pr√©senter le harc√®lement √† une classe de 6e (plus jeunes que toi).", intro: "Comment structures-tu ton intervention de 15 minutes ?", choices: [
                { text: "Tu leur montres des vid√©os choc de cyberharc√®lement pour les marquer.", result: "Risqu√©. Le choc sans outils cr√©e de l'anxi√©t√©, pas de l'action. Les plus jeunes peuvent √™tre traumatis√©s sans savoir quoi faire. Mieux vaut √©quiper qu'effrayer.", impact: { pedagogie: -10, impact: -15 } },
                { text: "Tu expliques le triangle, les r√¥les, et tu fais un jeu de r√¥le simple.", result: "Excellent ! Le triangle est accessible, les r√¥les permettent l'identification, et le jeu de r√¥le ancre dans l'action. Tu adaptes au niveau tout en transmettant l'essentiel.", impact: { pedagogie: +30, impact: +25 } },
                { text: "Tu leur lis les 8 m√©canismes de Bandura avec d√©finitions pr√©cises.", result: "Trop abstrait pour des 6e. Les concepts de Bandura demandent une maturit√© cognitive. Tu risques de les perdre. Adapte au public !", impact: { pedagogie: -5, impact: +5 } },
                { text: "Tu leur demandes de raconter leurs exp√©riences sans cadre.", result: "Dangereux. Sans cadre, tu peux d√©clencher des r√©v√©lations que tu n'es pas form√©¬∑e √† g√©rer. Les t√©moignages doivent √™tre encadr√©s par des adultes comp√©tents.", impact: { pedagogie: -20, impact: -10 } }
            ]},
            { title: "Le D√©fi du Renforceur Populaire", context: "Le/la plus populaire de ta classe rit toujours aux moqueries. Tu sais que √ßa renforce le harc√®lement.", intro: "Comment utilises-tu tes connaissances pour changer la dynamique ?", choices: [
                { text: "Tu le/la confrontes publiquement : 'Tu sais que tu es un renforceur ?'", result: "Tu humilies et cr√©es de la d√©fensivit√©. Il/elle utilisera le d√©sengagement moral ('il/elle est parano'). La confrontation publique renforce les positions.", impact: { efficacite: -15, norme: -20 } },
                { text: "Tu attends qu'il/elle d√©fende quelqu'un et tu valorises imm√©diatement.", result: "Strat√©gie d'attente positive ! Tu guettes l'occasion et tu renforces le comportement souhait√©. 'C'√©tait cool ce que tu as fait.' Association d√©fense = prestige.", impact: { efficacite: +25, norme: +30 } },
                { text: "Tu cr√©es des situations o√π d√©fendre est facile et visible.", result: "Strat√©gie proactive ! Tu facilites l'action en abaissant les barri√®res. Si d√©fendre est facile et visible, m√™me les h√©sitants peuvent franchir le pas.", impact: { efficacite: +30, norme: +25 } },
                { text: "Tu l'ignores et tu te concentres sur les autres.", result: "Tu n√©gliges l'influence des leaders sociaux. Les populaires ont un impact disproportionn√© sur les normes. Les ignorer, c'est laisser la norme se perp√©tuer.", impact: { efficacite: +5, norme: -10 } }
            ]},
            { title: "L'H√©ritage du Leader", context: "Fin d'ann√©e. Tu quittes l'√©tablissement. Que laisses-tu derri√®re toi ?", intro: "Comment t'assures-tu que ton impact perdure ?", choices: [
                { text: "Tu ne fais rien. Ce n'est plus ton probl√®me.", result: "Compr√©hensible mais dommage. Tout ce que tu as appris reste en toi mais ne se propage pas. L'impact s'arr√™te avec ton d√©part.", impact: { transmission: -20, durabilite: -30 } },
                { text: "Tu formes 2-3 personnes de confiance qui continueront.", result: "STRAT√âGIE CL√â. Tu cr√©es des 'successeurs'. Le changement durable passe par la transmission. Ces 2-3 personnes formeront d'autres personnes. Effet boule de neige.", impact: { transmission: +35, durabilite: +35 } },
                { text: "Tu √©cris un guide et tu le laisses au CDI.", result: "Utile mais passif. Un document peut informer, mais sans personnes pour le porter, il restera dans un tiroir. L'√©crit compl√®te la transmission humaine, ne la remplace pas.", impact: { transmission: +15, durabilite: +10 } },
                { text: "Tu organises une grande journ√©e de sensibilisation avant de partir.", result: "Beau geste mais impact ponctuel. Un √©v√©nement marque les esprits mais les normes se construisent au quotidien. Combiner avec la formation de successeurs serait id√©al.", impact: { transmission: +20, durabilite: +15 } }
            ]}
        ];

        function encodeSaveCode(data) { return btoa(JSON.stringify(data)); }
        function decodeSaveCode(code) { try { return JSON.parse(atob(code)); } catch { return null; } }
        function getMasteryLevel(score) {
            if (score >= 500) return { level: "Grand¬∑e Leader", class: "mastery-master" };
            if (score >= 350) return { level: "Leader Positif", class: "mastery-expert" };
            return { level: "Ambassadeur¬∑ice", class: "mastery-confirmed" };
        }

        function App() {
            const [gameState, setGameState] = useState("unlock");
            const [playerData, setPlayerData] = useState({ name: "", class: "", score: 0, xp: 0, quizScore: 0, scenarioScore: 0, finished: false });
            const [unlockCode, setUnlockCode] = useState("");
            const [unlockError, setUnlockError] = useState("");
            const [currentFlashcard, setCurrentFlashcard] = useState(0);
            const [flashcardFlipped, setFlashcardFlipped] = useState(false);
            const [currentQuiz, setCurrentQuiz] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showQuizFeedback, setShowQuizFeedback] = useState(false);
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioChoice, setScenarioChoice] = useState(null);
            const [showScenarioResult, setShowScenarioResult] = useState(false);

            function verifyUnlockCode() {
                const decoded = decodeSaveCode(unlockCode);
                if (!decoded) { setUnlockError("Code invalide."); return; }
                if (decoded.m !== PREREQUISITE_MODULE) { setUnlockError(`Code du module ${decoded.m}. Il te faut celui de ${PREREQUISITE_MODULE}.`); return; }
                if (!decoded.f) { setUnlockError("Module pr√©c√©dent non termin√©."); return; }
                setPlayerData(prev => ({ ...prev, name: decoded.n || "", class: decoded.c || "" }));
                setGameState("intro");
            }

            function nextFlashcard() {
                if (currentFlashcard < flashcardsData.length - 1) {
                    setCurrentFlashcard(prev => prev + 1);
                    setFlashcardFlipped(false);
                    setPlayerData(prev => ({ ...prev, xp: prev.xp + 20 }));
                } else {
                    setGameState("quiz");
                    setPlayerData(prev => ({ ...prev, xp: prev.xp + 100 }));
                }
            }

            function validateQuizAnswer() {
                setShowQuizFeedback(true);
                if (selectedAnswer === quizData[currentQuiz].correct) {
                    setPlayerData(prev => ({ ...prev, score: prev.score + 55, quizScore: prev.quizScore + 55, xp: prev.xp + 55 }));
                }
            }

            function nextQuizQuestion() {
                if (currentQuiz < quizData.length - 1) {
                    setCurrentQuiz(prev => prev + 1);
                    setSelectedAnswer(null);
                    setShowQuizFeedback(false);
                } else {
                    setGameState("scenarios");
                    setPlayerData(prev => ({ ...prev, xp: prev.xp + 100 }));
                }
            }

            function makeScenarioChoice(index) {
                setScenarioChoice(index);
                setShowScenarioResult(true);
                const choice = scenarioData[currentScenario].choices[index];
                const totalChange = Math.max(0, Object.values(choice.impact).reduce((a, b) => a + b, 0));
                setPlayerData(prev => ({ ...prev, score: prev.score + totalChange, scenarioScore: prev.scenarioScore + totalChange, xp: prev.xp + 40 }));
            }

            function nextScenario() {
                if (currentScenario < scenarioData.length - 1) {
                    setCurrentScenario(prev => prev + 1);
                    setScenarioChoice(null);
                    setShowScenarioResult(false);
                } else {
                    setPlayerData(prev => ({ ...prev, finished: true, xp: prev.xp + 150 }));
                    setGameState("complete");
                }
            }

            function generateSaveCode() {
                return encodeSaveCode({ v: 1, d: new Date().toISOString(), m: MODULE_ID, p: PILLAR_ID, n: playerData.name, c: playerData.class, s: playerData.score, x: playerData.xp, f: true, pillarComplete: true });
            }

            function copyCode() { navigator.clipboard.writeText(generateSaveCode()).then(() => alert("Code copi√© !")); }

            if (gameState === "unlock") {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("div", { className: "pillar-icon" }, "üëë"),
                        e("h1", { className: "glitch-title" }, "PIX-pHARe"),
                        e("div", { className: "subtitle" }, "Pilier Dynamiques de Groupe"),
                        e("div", { className: "module-badge" }, "‚≠ê CERTIFICATION ‚≠ê")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" }, e("div", { className: "panel-icon" }, "üîê"), e("div", { className: "panel-title" }, "Acc√®s Certification")),
                        e("div", { className: "panel-body" },
                            e("div", { className: "unlock-screen" },
                                e("div", { className: "lock-icon" }, "üëë"),
                                e("h2", { className: "unlock-title" }, MODULE_TITLE),
                                e("p", { style: { color: "var(--text-secondary)", marginBottom: "20px" } }, "Code du Module 04 requis pour acc√©der √† la certification."),
                                e("input", { type: "text", className: "code-input", value: unlockCode, onChange: ev => setUnlockCode(ev.target.value), placeholder: "Code du Module 04..." }),
                                unlockError && e("div", { className: "error-msg" }, unlockError),
                                e("div", { style: { marginTop: "25px" } }, e("button", { className: "action-btn", onClick: verifyUnlockCode, disabled: !unlockCode.trim() }, "[ D√âVERROUILLER ]"))
                            )
                        )
                    )
                );
            }

            if (gameState === "intro") {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("div", { className: "pillar-icon" }, "üëë"),
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Module 05 - Certification"),
                        e("div", { className: "module-badge" }, "‚≠ê √âPREUVE FINALE ‚≠ê")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" }, e("div", { className: "panel-icon" }, "üèÜ"), e("div", { className: "panel-title" }, "Tu es arriv√©¬∑e au bout")),
                        e("div", { className: "panel-body" },
                            e("p", { style: { fontSize: "1.1rem", marginBottom: "20px" } }, e("strong", null, playerData.name), ", tu as travers√© 4 modules. Il est temps de ", e("strong", { style: { color: "var(--leader-gold)" } }, "tout synth√©tiser"), "."),
                            e("div", { className: "synthesis-grid" },
                                e("div", { className: "synthesis-card m1" }, e("div", { className: "synthesis-title" }, "Module 01"), e("div", { className: "synthesis-content" }, "Triangle & R√¥les")),
                                e("div", { className: "synthesis-card m2" }, e("div", { className: "synthesis-title" }, "Module 02"), e("div", { className: "synthesis-content" }, "5 √âtapes du T√©moin")),
                                e("div", { className: "synthesis-card m3" }, e("div", { className: "synthesis-title" }, "Module 03"), e("div", { className: "synthesis-content" }, "8 M√©canismes de Bandura")),
                                e("div", { className: "synthesis-card m4" }, e("div", { className: "synthesis-title" }, "Module 04"), e("div", { className: "synthesis-content" }, "M√©thodes d'Intervention"))
                            ),
                            e("p", { style: { marginBottom: "20px", textAlign: "center" } }, "Ce module final teste ta capacit√© √† ", e("strong", null, "int√©grer"), " tous ces concepts ET √† les ", e("strong", { style: { color: "var(--leader-emerald)" } }, "transmettre"), "."),
                            e("div", { style: { textAlign: "center", marginTop: "30px" } }, e("button", { className: "action-btn", onClick: () => setGameState("flashcards") }, "[ COMMENCER LA CERTIFICATION ]"))
                        )
                    )
                );
            }

            if (gameState === "flashcards") {
                const card = flashcardsData[currentFlashcard];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" }, e("h1", { className: "glitch-title" }, MODULE_TITLE), e("div", { className: "subtitle" }, "Niveau 1 : Synth√®se")),
                    e("div", { className: "progress-bar" }, e("div", { className: "progress-node active" }, "1"), e("div", { className: "progress-node" }, "2"), e("div", { className: "progress-node" }, "3")),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Concept"), e("div", { className: "xp-value" }, `${currentFlashcard + 1}/${flashcardsData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" }, e("div", { className: "panel-icon" }, "üß†"), e("div", { className: "panel-title" }, "R√©vision Int√©grative")),
                        e("div", { className: "panel-body" },
                            e("div", { className: "flashcard-container" },
                                e("div", { className: `flashcard ${flashcardFlipped ? "flipped" : ""}`, onClick: () => setFlashcardFlipped(!flashcardFlipped) },
                                    e("div", { className: "flashcard-face flashcard-front" },
                                        e("div", { className: "flashcard-badge" }, card.badge),
                                        e("div", { className: "flashcard-question" }, card.question),
                                        e("div", { className: "flashcard-hint" }, card.hint)
                                    ),
                                    e("div", { className: "flashcard-face flashcard-back" },
                                        e("div", { className: "flashcard-badge", style: { background: "var(--leader-emerald)" } }, "MA√éTRIS√â"),
                                        e("div", { className: "flashcard-answer", dangerouslySetInnerHTML: { __html: card.answer } })
                                    )
                                )
                            ),
                            e("div", { className: "flashcard-nav" },
                                e("button", { className: "nav-btn", onClick: () => { setCurrentFlashcard(prev => prev - 1); setFlashcardFlipped(false); }, disabled: currentFlashcard === 0 }, "‚óÑ PR√âC"),
                                e("button", { className: "nav-btn", onClick: nextFlashcard }, currentFlashcard < flashcardsData.length - 1 ? "SUIV ‚ñ∫" : "NIVEAU 2 ‚ñ∫")
                            )
                        )
                    )
                );
            }

            if (gameState === "quiz") {
                const question = quizData[currentQuiz];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" }, e("h1", { className: "glitch-title" }, MODULE_TITLE), e("div", { className: "subtitle" }, "Niveau 2 : Int√©gration")),
                    e("div", { className: "progress-bar" }, e("div", { className: "progress-node completed" }, "‚úì"), e("div", { className: "progress-node active" }, "2"), e("div", { className: "progress-node" }, "3")),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Score"), e("div", { className: "xp-value" }, playerData.quizScore)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Question"), e("div", { className: "xp-value" }, `${currentQuiz + 1}/${quizData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" }, e("div", { className: "panel-icon" }, "üîó"), e("div", { className: "panel-title" }, "Connexions Conceptuelles")),
                        e("div", { className: "panel-body" },
                            e("div", { className: "quiz-question" }, question.question),
                            e("div", { className: "quiz-options" },
                                question.options.map((opt, idx) => {
                                    let optClass = "quiz-option";
                                    if (showQuizFeedback) { if (idx === question.correct) optClass += " correct"; else if (idx === selectedAnswer) optClass += " incorrect"; }
                                    else if (idx === selectedAnswer) optClass += " selected";
                                    return e("div", { key: idx, className: optClass, onClick: () => { if (!showQuizFeedback) setSelectedAnswer(idx); } },
                                        e("div", { className: "option-marker" }, String.fromCharCode(65 + idx)),
                                        e("div", { className: "option-text" }, opt)
                                    );
                                })
                            ),
                            showQuizFeedback && e("div", { className: `feedback-box ${selectedAnswer !== question.correct ? "incorrect-feedback" : ""}` },
                                e("div", { className: "feedback-title" }, selectedAnswer === question.correct ? "‚úì INT√âGRATION R√âUSSIE" : "‚úó CONNEXION √Ä REVOIR"),
                                e("p", null, question.feedback)
                            ),
                            e("div", { style: { textAlign: "center", marginTop: "25px" } },
                                !showQuizFeedback ? e("button", { className: "action-btn", onClick: validateQuizAnswer, disabled: selectedAnswer === null }, "[ VALIDER ]") :
                                e("button", { className: "action-btn", onClick: nextQuizQuestion }, currentQuiz < quizData.length - 1 ? "[ SUIVANT ]" : "[ NIVEAU 3 ]")
                            )
                        )
                    )
                );
            }

            if (gameState === "scenarios") {
                const scenario = scenarioData[currentScenario];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" }, e("h1", { className: "glitch-title" }, MODULE_TITLE), e("div", { className: "subtitle" }, "Niveau 3 : Transmission")),
                    e("div", { className: "progress-bar" }, e("div", { className: "progress-node completed" }, "‚úì"), e("div", { className: "progress-node completed" }, "‚úì"), e("div", { className: "progress-node active" }, "3")),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP Total"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Score"), e("div", { className: "xp-value" }, playerData.score)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "√âpreuve"), e("div", { className: "xp-value" }, `${currentScenario + 1}/${scenarioData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" }, e("div", { className: "panel-icon" }, "üåü"), e("div", { className: "panel-title" }, scenario.title)),
                        e("div", { className: "panel-body" },
                            e("div", { className: "scenario-context" }, scenario.context),
                            e("div", { className: "scenario-intro" }, scenario.intro),
                            !showScenarioResult ? e("div", null, scenario.choices.map((choice, idx) => e("button", { key: idx, className: "choice-btn", onClick: () => makeScenarioChoice(idx) }, choice.text))) :
                            e("div", { className: "choice-result" },
                                e("p", { style: { marginBottom: "15px", lineHeight: "1.7" } }, scenario.choices[scenarioChoice].result),
                                e("div", { className: "impact-score" }, Object.entries(scenario.choices[scenarioChoice].impact).map(([key, val]) => e("div", { key: key, className: `impact-item ${val > 0 ? "positive" : "negative"}` }, `${key}: ${val > 0 ? "+" : ""}${val}`))),
                                e("div", { style: { textAlign: "center", marginTop: "25px" } }, e("button", { className: "action-btn", onClick: nextScenario }, currentScenario < scenarioData.length - 1 ? "[ SUIVANT ]" : "[ CERTIFICATION ]"))
                            )
                        )
                    )
                );
            }

            if (gameState === "complete") {
                const mastery = getMasteryLevel(playerData.score);
                return e("div", { className: "app-container" },
                    e("div", { className: "completion-screen" },
                        e("div", { className: "completion-icon" }, "üëë"),
                        e("h1", { className: "completion-title" }, "LEADER POSITIF CERTIFI√â¬∑E"),
                        e("div", { className: `mastery-badge ${mastery.class}` }, mastery.level),
                        e("div", { className: "certificate-frame" },
                            e("div", { className: "certificate-title" }, "CERTIFICAT D'ACCOMPLISSEMENT"),
                            e("div", { className: "certificate-text" }, "Pilier Dynamiques de Groupe"),
                            e("div", { className: "certificate-name" }, playerData.name),
                            e("div", { className: "certificate-text" }, "A compl√©t√© avec succ√®s les 5 modules du pilier et d√©montr√© sa ma√Ætrise des concepts de psychologie sociale du harc√®lement."),
                            e("div", { className: "certificate-text", style: { marginTop: "15px", fontStyle: "italic" } }, "Triangle ‚Ä¢ 5 √âtapes ‚Ä¢ 8 M√©canismes ‚Ä¢ M√©thodes ‚Ä¢ Transmission")
                        ),
                        e("div", { className: "stats-grid" },
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.score), e("div", { className: "stat-label" }, "Score Final")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.xp), e("div", { className: "stat-label" }, "XP Pilier")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.quizScore), e("div", { className: "stat-label" }, "Int√©gration")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.scenarioScore), e("div", { className: "stat-label" }, "Transmission"))
                        ),
                        e("div", { className: "save-code-box" },
                            e("div", { className: "save-code-label" }, "üìã CODE DE CERTIFICATION DU PILIER GROUPE :"),
                            e("div", { className: "save-code" }, generateSaveCode()),
                            e("button", { className: "copy-btn", onClick: copyCode }, "Copier le code")
                        ),
                        e("div", { className: "content-panel", style: { marginTop: "30px", textAlign: "left" } },
                            e("div", { className: "panel-header" }, e("div", { className: "panel-icon" }, "üöÄ"), e("div", { className: "panel-title" }, "Et maintenant ?")),
                            e("div", { className: "panel-body" },
                                e("p", null, "Tu es maintenant ", e("strong", { style: { color: "var(--leader-gold)" } }, "certifi√©¬∑e Leader Positif"), " du pilier Dynamiques de Groupe."),
                                e("p", { style: { marginTop: "15px" } }, "Ta mission : ", e("strong", null, "cr√©er des normes de protection"), " dans ton environnement et ", e("strong", null, "transmettre"), " ce que tu as appris."),
                                e("p", { style: { marginTop: "15px" } }, "Continue avec les autres piliers : ", e("strong", { style: { color: "var(--leader-cyan)" } }, "Architectes du Num√©rique"), ", ", e("strong", { style: { color: "var(--leader-purple)" } }, "Gardiens du Droit"), ", et bient√¥t ", e("strong", { style: { color: "var(--leader-emerald)" } }, "Histoire du Harc√®lement"), ".")
                            )
                        )
                    )
                );
            }

            return null;
        }

        ReactDOM.createRoot(document.getElementById("root")).render(e(App));
    </script>
</body>
</html>
