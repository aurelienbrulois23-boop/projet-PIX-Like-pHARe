<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIX-pHARe | Module NUM√âRIQUE 05 - Ma√Ætre de ton Feed</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&family=Share+Tech+Mono&display=swap');
        
        :root {
            --master-gold: #ffd700;
            --master-platinum: #e5e4e2;
            --energy-cyan: #00f5ff;
            --energy-magenta: #ff00ff;
            --energy-green: #00ff88;
            --void-black: #050510;
            --deep-space: #0a0a1a;
            --panel-bg: rgba(10, 10, 26, 0.95);
            --text-primary: #ffffff;
            --text-secondary: #aaaacc;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--void-black);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .cosmic-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(0, 245, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        .stars {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            width: 2px; height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }
        
        .app-container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 50px 20px;
        }
        
        .crown-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            animation: crownFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.8));
        }
        
        @keyframes crownFloat {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .glitch-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--master-gold), var(--master-platinum), var(--master-gold));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShimmer 3s ease-in-out infinite;
            letter-spacing: 4px;
        }
        
        @keyframes goldShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.1rem;
            color: var(--energy-cyan);
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 5px;
        }
        
        .module-badge {
            display: inline-block;
            margin-top: 25px;
            padding: 15px 40px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(0, 245, 255, 0.2));
            border: 3px solid var(--master-gold);
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--master-gold);
            clip-path: polygon(20px 0%, calc(100% - 20px) 0%, 100% 50%, calc(100% - 20px) 100%, 20px 100%, 0% 50%);
        }
        
        .progress-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .progress-node {
            width: 60px; height: 60px;
            border: 3px solid var(--text-secondary);
            background: var(--void-black);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--text-secondary);
            clip-path: polygon(50% 0%, 93% 25%, 93% 75%, 50% 100%, 7% 75%, 7% 25%);
            transition: all 0.4s ease;
        }
        
        .progress-node.active {
            border-color: var(--master-gold);
            color: var(--master-gold);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        .progress-node.completed {
            border-color: var(--energy-green);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 245, 255, 0.1));
            color: var(--energy-green);
        }
        
        .xp-display {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .xp-box {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0, 245, 255, 0.05));
            border: 2px solid var(--master-gold);
            padding: 18px 30px;
            text-align: center;
            clip-path: polygon(15px 0%, calc(100% - 15px) 0%, 100% 15px, 100% calc(100% - 15px), calc(100% - 15px) 100%, 15px 100%, 0% calc(100% - 15px), 0% 15px);
        }
        
        .xp-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .xp-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--master-gold), var(--energy-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .content-panel {
            background: var(--panel-bg);
            border: 2px solid rgba(255, 215, 0, 0.4);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        
        .content-panel::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--master-gold), var(--energy-cyan), var(--energy-magenta), var(--energy-green), var(--master-gold));
            background-size: 200% 100%;
            animation: rainbowBorder 5s linear infinite;
        }
        
        @keyframes rainbowBorder {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .panel-header {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(0, 245, 255, 0.1));
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .panel-icon {
            width: 55px; height: 55px;
            background: linear-gradient(135deg, var(--master-gold), var(--energy-cyan));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        }
        
        .panel-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--master-gold);
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .panel-body { padding: 30px; }
        
        .unlock-screen { text-align: center; padding: 50px 20px; }
        
        .lock-icon {
            font-size: 5rem;
            margin-bottom: 25px;
            animation: lockPulse 2s ease-in-out infinite;
        }
        
        @keyframes lockPulse {
            0%, 100% { transform: scale(1); filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5)); }
            50% { transform: scale(1.1); filter: drop-shadow(0 0 40px rgba(255, 215, 0, 0.8)); }
        }
        
        .unlock-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: var(--master-gold);
            margin-bottom: 15px;
        }
        
        .code-input {
            width: 100%;
            max-width: 500px;
            padding: 18px;
            background: var(--void-black);
            border: 2px solid var(--energy-cyan);
            color: var(--text-primary);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            margin: 25px auto;
            display: block;
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--master-gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .error-msg {
            color: var(--energy-magenta);
            font-family: 'Share Tech Mono', monospace;
            margin-top: 15px;
            padding: 12px;
            border: 1px solid var(--energy-magenta);
            background: rgba(255, 0, 255, 0.1);
        }
        
        .flashcard-container { perspective: 1500px; margin-bottom: 25px; }
        
        .flashcard {
            position: relative;
            width: 100%;
            min-height: 250px;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .flashcard.flipped { transform: rotateY(180deg); }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            min-height: 250px;
            backface-visibility: hidden;
            border: 3px solid var(--master-gold);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 30px;
            background: var(--void-black);
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0, 245, 255, 0.1));
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(255, 215, 0, 0.1));
            border-color: var(--energy-green);
        }
        
        .flashcard-mastery {
            position: absolute;
            top: 15px; right: 15px;
            padding: 8px 18px;
            background: linear-gradient(135deg, var(--master-gold), var(--energy-cyan));
            color: var(--void-black);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .flashcard-question {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--master-gold);
            text-align: center;
            margin-bottom: 15px;
        }
        
        .flashcard-hint {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            color: var(--energy-cyan);
            text-align: center;
        }
        
        .flashcard-answer {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--text-primary);
        }
        
        .flashcard-answer strong { color: var(--energy-green); }
        
        .flashcard-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
        }
        
        .nav-btn {
            background: transparent;
            border: 2px solid var(--energy-cyan);
            color: var(--energy-cyan);
            padding: 14px 35px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        .nav-btn:hover {
            background: rgba(0, 245, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 245, 255, 0.4);
        }
        
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        
        .quiz-question {
            font-size: 1.15rem;
            font-weight: 600;
            margin-bottom: 25px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0, 245, 255, 0.05));
            border-left: 5px solid var(--master-gold);
        }
        
        .quiz-options { display: flex; flex-direction: column; gap: 15px; }
        
        .quiz-option {
            background: var(--void-black);
            border: 2px solid var(--text-secondary);
            padding: 18px 22px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 18px;
        }
        
        .quiz-option:hover:not(.selected):not(.correct):not(.incorrect) {
            border-color: var(--master-gold);
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(8px);
        }
        
        .quiz-option.selected {
            border-color: var(--energy-cyan);
            background: rgba(0, 245, 255, 0.15);
        }
        
        .quiz-option.correct {
            border-color: var(--energy-green);
            background: rgba(0, 255, 136, 0.2);
        }
        
        .quiz-option.incorrect {
            border-color: var(--energy-magenta);
            background: rgba(255, 0, 255, 0.15);
        }
        
        .option-marker {
            width: 40px; height: 40px;
            border: 2px solid currentColor;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        }
        
        .option-text { flex: 1; font-size: 1rem; }
        
        .feedback-box {
            margin-top: 25px;
            padding: 25px;
            border-left: 5px solid var(--energy-green);
            background: rgba(0, 255, 136, 0.1);
        }
        
        .feedback-box.incorrect-feedback {
            border-color: var(--energy-magenta);
            background: rgba(255, 0, 255, 0.1);
        }
        
        .feedback-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--energy-green);
            margin-bottom: 12px;
        }
        
        .feedback-box.incorrect-feedback .feedback-title { color: var(--energy-magenta); }
        
        .scenario-intro {
            font-size: 1.05rem;
            line-height: 1.8;
            margin-bottom: 25px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(0, 245, 255, 0.1), rgba(255, 215, 0, 0.1));
            border: 2px solid rgba(0, 245, 255, 0.3);
        }
        
        .scenario-context {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.95rem;
            color: var(--master-gold);
            margin-bottom: 20px;
            padding: 15px 18px;
            background: rgba(255, 215, 0, 0.1);
            border: 2px dashed var(--master-gold);
        }
        
        .choice-btn {
            display: block;
            width: 100%;
            background: var(--void-black);
            border: 2px solid var(--text-secondary);
            padding: 20px 22px;
            margin-bottom: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.05rem;
            color: var(--text-primary);
        }
        
        .choice-btn:hover {
            border-color: var(--master-gold);
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(8px);
        }
        
        .choice-result {
            margin-top: 25px;
            padding: 25px;
            background: var(--void-black);
            border: 2px solid var(--energy-green);
        }
        
        .impact-score {
            display: flex;
            gap: 15px;
            margin-top: 18px;
            flex-wrap: wrap;
        }
        
        .impact-item {
            padding: 10px 18px;
            background: rgba(0, 245, 255, 0.1);
            border: 2px solid var(--energy-cyan);
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
        }
        
        .impact-item.positive { border-color: var(--energy-green); color: var(--energy-green); }
        .impact-item.negative { border-color: var(--energy-magenta); color: var(--energy-magenta); }
        
        .action-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--master-gold), var(--energy-cyan), var(--master-gold));
            background-size: 200% 200%;
            color: var(--void-black);
            border: none;
            padding: 18px 50px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: btnShimmer 3s ease-in-out infinite;
            clip-path: polygon(20px 0%, calc(100% - 20px) 0%, 100% 50%, calc(100% - 20px) 100%, 20px 100%, 0% 50%);
        }
        
        @keyframes btnShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.6);
        }
        
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; animation: none; }
        
        .completion-screen { text-align: center; padding: 60px 20px; }
        
        .certificate-frame {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(0, 245, 255, 0.1));
            border: 4px solid var(--master-gold);
            padding: 40px;
            margin-bottom: 30px;
            position: relative;
        }
        
        .certificate-frame::before,
        .certificate-frame::after {
            content: '‚òÖ';
            position: absolute;
            font-size: 2rem;
            color: var(--master-gold);
        }
        
        .certificate-frame::before { top: 10px; left: 10px; }
        .certificate-frame::after { bottom: 10px; right: 10px; }
        
        .completion-icon {
            font-size: 6rem;
            margin-bottom: 25px;
            animation: crownSpin 4s ease-in-out infinite;
        }
        
        @keyframes crownSpin {
            0%, 100% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.1); }
        }
        
        .completion-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--master-gold), var(--master-platinum), var(--master-gold));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShimmer 3s ease-in-out infinite;
            margin-bottom: 15px;
        }
        
        .completion-subtitle {
            font-size: 1.3rem;
            color: var(--energy-cyan);
            margin-bottom: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 35px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0, 245, 255, 0.05));
            border: 2px solid var(--master-gold);
            padding: 25px;
            text-align: center;
        }
        
        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--master-gold), var(--energy-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stat-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-top: 8px;
        }
        
        .save-code-box {
            background: var(--void-black);
            border: 3px solid var(--energy-green);
            padding: 30px;
            margin: 35px 0;
        }
        
        .save-code-label {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            color: var(--energy-green);
            margin-bottom: 15px;
        }
        
        .save-code {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: var(--master-gold);
            word-break: break-all;
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border: 2px dashed var(--master-gold);
        }
        
        .copy-btn {
            margin-top: 20px;
            background: transparent;
            border: 2px solid var(--energy-green);
            color: var(--energy-green);
            padding: 12px 30px;
            font-family: 'Share Tech Mono', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background: rgba(0, 255, 136, 0.2);
        }
        
        .mastery-badge {
            display: inline-block;
            padding: 15px 35px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            border: 3px solid;
            margin-top: 20px;
        }
        
        .mastery-expert {
            color: var(--master-gold);
            border-color: var(--master-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(0, 245, 255, 0.1));
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        .mastery-confirmed { color: var(--energy-cyan); border-color: var(--energy-cyan); }
        .mastery-training { color: var(--energy-green); border-color: var(--energy-green); }
        
        @media (max-width: 600px) {
            .glitch-title { font-size: 1.8rem; }
            .crown-icon { font-size: 2.5rem; }
            .progress-node { width: 48px; height: 48px; font-size: 1.1rem; }
            .panel-body { padding: 20px; }
            .flashcard-face { padding: 20px; min-height: 280px; }
            .completion-title { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <div class="cosmic-bg"></div>
    <div class="stars">
        <div class="star" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
        <div class="star" style="top: 25%; left: 80%; animation-delay: 0.5s;"></div>
        <div class="star" style="top: 40%; left: 10%; animation-delay: 1s;"></div>
        <div class="star" style="top: 55%; left: 60%; animation-delay: 1.5s;"></div>
        <div class="star" style="top: 70%; left: 30%; animation-delay: 2s;"></div>
        <div class="star" style="top: 85%; left: 90%; animation-delay: 2.5s;"></div>
        <div class="star" style="top: 15%; left: 50%; animation-delay: 0.3s;"></div>
        <div class="star" style="top: 60%; left: 85%; animation-delay: 1.8s;"></div>
    </div>
    
    <div id="root"></div>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script>
        const { useState } = React;
        const e = React.createElement;

        const MODULE_ID = "NUMERIQUE_05";
        const MODULE_VERSION = "1.0";
        const MODULE_TITLE = "Ma√Ætre de ton Feed";
        const PREREQUISITE_MODULE = "NUMERIQUE_04";
        
        const flashcardsData = [
            {
                mastery: "SYNTH√àSE",
                question: "R√©sume l'√©conomie de l'attention en une phrase.",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "<strong>Tu n'es pas le client des plateformes gratuites, tu es le produit.</strong> Ton temps d'attention est vendu aux annonceurs. Chaque seconde pass√©e = revenus pour eux. L'objectif n'est pas de t'informer, mais de te garder connect√©."
            },
            {
                mastery: "SYNTH√àSE",
                question: "Pourquoi les Dark Patterns fonctionnent-ils si bien ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "Ils exploitent nos <strong>automatismes cognitifs</strong> : biais de confirmation, aversion √† la perte, pression sociale. Notre cerveau prend 95% de ses d√©cisions en 'mode automatique'. Les Dark Patterns ciblent ce mode pour contourner notre r√©flexion consciente."
            },
            {
                mastery: "SYNTH√àSE",
                question: "Comment les bulles menacent-elles la d√©mocratie ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "La d√©mocratie suppose des citoyens partageant une <strong>r√©alit√© commune</strong>. Les bulles cr√©ent des r√©alit√©s parall√®les : m√™mes √©v√©nements, interpr√©tations oppos√©es. Sans terrain factuel commun, le d√©bat devient impossible."
            },
            {
                mastery: "SYNTH√àSE",
                question: "Quels sont tes 4 droits RGPD fondamentaux ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "<strong>1) ACC√àS</strong> : savoir quelles donn√©es. <strong>2) EFFACEMENT</strong> : les faire supprimer. <strong>3) PORTABILIT√â</strong> : les r√©cup√©rer. <strong>4) OPPOSITION</strong> : refuser la pub cibl√©e. D√©lai : 1 mois. Recours : CNIL."
            },
            {
                mastery: "MA√éTRISE",
                question: "Qu'est-ce que l'hygi√®ne num√©rique ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "Pratiques r√©guli√®res pour garder le contr√¥le : 1) Audit mensuel des apps. 2) Purge des notifications. 3) Temps d'√©cran planifi√©. 4) <strong>Diversification volontaire</strong> des sources. 5) D√©connexion intentionnelle."
            },
            {
                mastery: "MA√éTRISE",
                question: "Comment reprogrammer ton algorithme ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "L'algo apprend de tes actions. <strong>Entra√Æne-le</strong> : like des sources diverses, clique 'Pas int√©ress√©' sur le contenu toxique, navigation priv√©e pour recherches neutres, abonne-toi √† des opinions contraires. Tu sculptes ton feed."
            },
            {
                mastery: "PHILOSOPHIE",
                question: "Qu'est-ce que la 'libert√© num√©rique' ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "Ce n'est pas l'absence de technologie, mais la <strong>ma√Ætrise de son usage</strong>. √ätre libre = utiliser les outils selon TES objectifs, pas ceux des plateformes. Choisir consciemment quand, √† quoi, comment. Le num√©rique √† ton service."
            },
            {
                mastery: "TRANSMISSION",
                question: "Comment transmettre ces connaissances ?",
                hint: "[ Cliquez pour la synth√®se ]",
                answer: "Un ma√Ætre ne garde pas son savoir. <strong>Montre</strong> les param√®tres √† tes proches. <strong>Explique</strong> les m√©canismes sans moraliser. <strong>Propose</strong> des exp√©riences (navigation priv√©e ensemble). La connaissance partag√©e multiplie son pouvoir."
            }
        ];

        const quizData = [
            {
                question: "Tu as 30 minutes de transport. Quelle est l'approche 'Ma√Ætre du Feed' ?",
                options: [
                    "Scroller TikTok pour passer le temps",
                    "D√©cider AVANT ce que tu veux faire (podcast, lecture, rien)",
                    "R√©pondre √† tous les messages en attente",
                    "Regarder les stories de tout le monde"
                ],
                correct: 1,
                feedback: "L'intentionnalit√© AVANT l'action. D√©cider 'je vais √©couter ce podcast' AVANT d'√™tre dans le transport. Si tu ouvres ton t√©l√©phone sans but, l'algorithme d√©cide pour toi. Le Ma√Ætre choisit, le consommateur subit."
            },
            {
                question: "Un ami dit : 'J'ai vu une vid√©o qui dit que [complot]. C'est vrai ?' Que r√©ponds-tu ?",
                options: [
                    "'Oui c'est vrai, j'ai vu la m√™me chose'",
                    "'Non c'est faux' et tu changes de sujet",
                    "Tu expliques les bulles et proposes de chercher des sources ensemble",
                    "Tu te moques de lui"
                ],
                correct: 2,
                feedback: "Le Ma√Ætre ne juge pas mais √©duque. Expliquer les m√©canismes (bulles, recommandations) aide ton ami √† d√©velopper son esprit critique. Proposer de chercher ensemble respecte son intelligence tout en l'outillant."
            },
            {
                question: "Tu as pass√© 3h sur ton t√©l√©phone sans t'en rendre compte. R√©action ?",
                options: [
                    "Culpabilit√© intense",
                    "Analyse neutre : qu'est-ce qui s'est pass√© ? Comment l'√©viter ?",
                    "C'est pas grave, tout le monde fait √ßa",
                    "Tu jettes ton t√©l√©phone"
                ],
                correct: 1,
                feedback: "Ni culpabilit√© (qui paralyse) ni d√©ni (qui perp√©tue). L'approche Ma√Ætre : observation factuelle et ajustement. 'J'ai ouvert Instagram pour un message et je me suis fait avoir. Solution : r√©pondre via notifications sans ouvrir l'app.'"
            },
            {
                question: "Quelle combinaison cr√©e l'environnement le plus 'anti-manipulation' ?",
                options: [
                    "Mode sombre + √©cran couleur + notifications activ√©es",
                    "Notifications off + autoplay off + niveaux de gris + apps dans dossiers",
                    "T√©l√©phone en silencieux uniquement",
                    "Supprimer tous les r√©seaux sociaux"
                ],
                correct: 1,
                feedback: "La combinaison attaque tous les vecteurs : notifications (interruptions), autoplay (engagement forc√©), couleurs (stimulation), accessibilit√© (friction). Supprimer les apps est radical mais pas toujours r√©aliste. Mieux vaut coexister."
            },
            {
                question: "Un Ma√Ætre du Feed se d√©finit par :",
                options: [
                    "Le nombre d'heures pass√©es hors ligne",
                    "Sa capacit√© √† CHOISIR consciemment son usage",
                    "Son m√©pris pour les r√©seaux",
                    "Sa ma√Ætrise technique des param√®tres"
                ],
                correct: 1,
                feedback: "Ce n'est pas une question de quantit√© ni de rejet ni de technique pure. C'est une question de CONSCIENCE et de CHOIX. Un Ma√Ætre peut passer 2h sur YouTube si c'est un choix d√©lib√©r√©. Ce qui compte : qui d√©cide, toi ou l'algorithme ?"
            }
        ];

        const scenarioData = [
            {
                title: "L'Intervention",
                context: "Ton petit fr√®re de 11 ans passe 6h/jour sur TikTok. Tes parents sont d√©pass√©s.",
                intro: "Ils te demandent de l'aider. Tu observes : scroll infini, pas de limite, compte public, commentaires toxiques, contenu de plus en plus extr√™me. Comment interviens-tu ?",
                choices: [
                    { text: "Tu lui fais la morale et tu confisques son t√©l√©phone.", result: "Approche autoritaire qui cr√©e r√©sistance. Il trouvera d'autres moyens. Tu n'as rien transmis de ta compr√©hension.", impact: { transmission: -15, efficacite: -20 } },
                    { text: "Tu lui montres les param√®tres de confidentialit√© et installes les limites ENSEMBLE.", result: "Excellente approche collaborative. Tu lui donnes du POUVOIR sur son outil. L'impliquer cr√©e l'adh√©sion.", impact: { transmission: +25, efficacite: +20 } },
                    { text: "Tu lui expliques comment l'algorithme fonctionne et vous 'reprogrammez' son feed ensemble.", result: "Approche de ma√Ætre : transmettre la COMPR√âHENSION. En voyant l'algo r√©agir, il comprend qu'il a du pouvoir. Tu cr√©es un futur 'architecte'.", impact: { transmission: +30, efficacite: +25 } },
                    { text: "Tu installes un contr√¥le parental strict sans expliquer.", result: "Solution technique sans √©ducation. Il contournera. D√®s qu'il aura son propre t√©l√©phone, il sera aussi vuln√©rable.", impact: { transmission: -10, efficacite: +5 } }
                ]
            },
            {
                title: "La Crise Virale",
                context: "Une vid√©o g√™nante de toi devient virale au coll√®ge. Comptes anonymes, moqueries.",
                intro: "En 24h : 2000 vues, 150 commentaires moqueurs, messages d'inconnus. Tu as maintenant les outils d'un ma√Ætre. Comment g√®res-tu ?",
                choices: [
                    { text: "Tu supprimes tous tes comptes et tu disparais.", result: "R√©action compr√©hensible mais qui t'isole. La vid√©o existe toujours, tu perds ta capacit√© √† communiquer ta version.", impact: { resilience: -15, controle: -20 } },
                    { text: "Tu documentes (screenshots dat√©s), signales partout, parles √† un adulte, pr√©pares une plainte.", result: "Protocole optimal. Documentation = preuves. Signalement = action technique. Adulte = soutien juridique. C'est la r√©ponse d'un ma√Ætre.", impact: { resilience: +30, controle: +25 } },
                    { text: "Tu r√©ponds √† chaque commentaire pour te d√©fendre.", result: "Pi√®ge de l'engagement. Chaque r√©ponse = visibilit√© = algorithme qui boost. Tu nourris le monstre. Le silence strat√©gique est souvent plus efficace.", impact: { resilience: -10, controle: -15 } },
                    { text: "Tu publies ta propre vid√©o d'explication avec humour et autod√©rision.", result: "Strat√©gie avanc√©e. Transformer la honte en force. Reprendre le narratif. Risqu√© mais puissant si bien ex√©cut√©.", impact: { resilience: +20, controle: +30 } }
                ]
            },
            {
                title: "Le Choix du Ma√Ætre",
                context: "Tu es sollicit√© pour devenir ambassadeur pHARe. On te demande de former les 6√®mes.",
                intro: "Le CPE te propose de cr√©er des ateliers citoyennet√© num√©rique. Tu as les connaissances des 5 modules. Comment structures-tu ?",
                choices: [
                    { text: "Tu fais un expos√© PowerPoint avec toutes les infos.", result: "Format passif. Les 6√®mes d√©crocheront apr√®s 5 minutes. L'information n'est pas la transformation. Tu as appris par l'EXP√âRIENCE.", impact: { pedagogie: -10, impact: -15 } },
                    { text: "Tu cr√©es des mises en situation o√π ils vivent les manipulations, puis tu d√©briefes.", result: "P√©dagogie exp√©rientielle : faire vivre AVANT d'expliquer. Le v√©cu cr√©e l'accroche, le debrief apporte la compr√©hension. C'est la m√©thode qui t'a form√©.", impact: { pedagogie: +30, impact: +25 } },
                    { text: "Tu leur fais peur avec des exemples de cyberharc√®lement extr√™mes.", result: "La peur sans outils cr√©e l'impuissance. Ils sortiront anxieux mais pas outill√©s. L'objectif n'est pas qu'ils aient peur, mais qu'ils sachent ma√Ætriser.", impact: { pedagogie: -15, impact: -10 } },
                    { text: "Tu leur montres comment configurer leurs param√®tres en temps r√©el sur leurs t√©l√©phones.", result: "Apprentissage par l'action. Ils repartent avec quelque chose de CONCRET. Excellente approche technique √† combiner avec les mises en situation.", impact: { pedagogie: +25, impact: +30 } }
                ]
            }
        ];

        function encodeSaveCode(data) { return btoa(JSON.stringify(data)); }
        function decodeSaveCode(code) { try { return JSON.parse(atob(code)); } catch { return null; } }
        function getMasteryLevel(score) {
            if (score >= 600) return { level: "Grand Ma√Ætre", class: "mastery-expert" };
            if (score >= 380) return { level: "Ma√Ætre", class: "mastery-confirmed" };
            return { level: "Apprenti", class: "mastery-training" };
        }

        function App() {
            const [gameState, setGameState] = useState("unlock");
            const [playerData, setPlayerData] = useState({ name: "", class: "", level: 1, score: 0, xp: 0, quizScore: 0, scenarioScore: 0, flashcardsViewed: 0, finished: false });
            const [unlockCode, setUnlockCode] = useState("");
            const [unlockError, setUnlockError] = useState("");
            const [currentFlashcard, setCurrentFlashcard] = useState(0);
            const [flashcardFlipped, setFlashcardFlipped] = useState(false);
            const [currentQuiz, setCurrentQuiz] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showQuizFeedback, setShowQuizFeedback] = useState(false);
            const [currentScenario, setCurrentScenario] = useState(0);
            const [scenarioChoice, setScenarioChoice] = useState(null);
            const [showScenarioResult, setShowScenarioResult] = useState(false);

            function verifyUnlockCode() {
                const decoded = decodeSaveCode(unlockCode);
                if (!decoded) { setUnlockError("Code invalide."); return; }
                if (decoded.m !== PREREQUISITE_MODULE) { setUnlockError(`Ce code provient du module ${decoded.m}. Tu as besoin du code de ${PREREQUISITE_MODULE}.`); return; }
                if (!decoded.f) { setUnlockError("Tu n'as pas termin√© le module pr√©c√©dent."); return; }
                setPlayerData(prev => ({ ...prev, name: decoded.n || "", class: decoded.c || "" }));
                setGameState("intro");
            }

            function startGame() { setGameState("flashcards"); }

            function nextFlashcard() {
                if (currentFlashcard < flashcardsData.length - 1) {
                    setCurrentFlashcard(prev => prev + 1);
                    setFlashcardFlipped(false);
                    setPlayerData(prev => ({ ...prev, flashcardsViewed: Math.max(prev.flashcardsViewed, currentFlashcard + 2), xp: prev.xp + 18 }));
                } else {
                    setGameState("quiz");
                    setPlayerData(prev => ({ ...prev, level: 2, flashcardsViewed: flashcardsData.length, xp: prev.xp + 80 }));
                }
            }

            function prevFlashcard() { if (currentFlashcard > 0) { setCurrentFlashcard(prev => prev - 1); setFlashcardFlipped(false); } }

            function selectQuizAnswer(index) { if (!showQuizFeedback) setSelectedAnswer(index); }

            function validateQuizAnswer() {
                setShowQuizFeedback(true);
                if (selectedAnswer === quizData[currentQuiz].correct) {
                    setPlayerData(prev => ({ ...prev, score: prev.score + 50, quizScore: prev.quizScore + 50, xp: prev.xp + 50 }));
                }
            }

            function nextQuizQuestion() {
                if (currentQuiz < quizData.length - 1) {
                    setCurrentQuiz(prev => prev + 1);
                    setSelectedAnswer(null);
                    setShowQuizFeedback(false);
                } else {
                    setGameState("scenarios");
                    setPlayerData(prev => ({ ...prev, level: 3, xp: prev.xp + 100 }));
                }
            }

            function makeScenarioChoice(index) {
                setScenarioChoice(index);
                setShowScenarioResult(true);
                const choice = scenarioData[currentScenario].choices[index];
                const values = Object.values(choice.impact);
                const totalChange = Math.max(0, values.reduce((a, b) => a + b, 0));
                setPlayerData(prev => ({ ...prev, score: prev.score + totalChange, scenarioScore: prev.scenarioScore + totalChange, xp: prev.xp + 40 }));
            }

            function nextScenario() {
                if (currentScenario < scenarioData.length - 1) {
                    setCurrentScenario(prev => prev + 1);
                    setScenarioChoice(null);
                    setShowScenarioResult(false);
                } else {
                    setPlayerData(prev => ({ ...prev, finished: true, xp: prev.xp + 200 }));
                    setGameState("complete");
                }
            }

            function generateSaveCode() {
                return encodeSaveCode({
                    v: 1, d: new Date().toISOString(), m: MODULE_ID, mv: MODULE_VERSION,
                    n: playerData.name, c: playerData.class, l: 3, s: playerData.score,
                    x: playerData.xp, q: playerData.quizScore, sc: playerData.scenarioScore,
                    f: true, cert: true, pilier: "NUMERIQUE", pilierComplete: true
                });
            }

            function copyCode() { navigator.clipboard.writeText(generateSaveCode()).then(() => alert("Code de certification copi√© !")); }

            function renderUnlock() {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("div", { className: "crown-icon" }, "üëë"),
                        e("h1", { className: "glitch-title" }, "PIX-pHARe"),
                        e("div", { className: "subtitle" }, "Pilier Num√©rique ‚Ä¢ √âpreuve Finale"),
                        e("div", { className: "module-badge" }, "MODULE 05 - VERROUILL√â")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üîê"),
                            e("div", { className: "panel-title" }, "Acc√®s Ma√Ætre")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "unlock-screen" },
                                e("div", { className: "lock-icon" }, "‚ö°"),
                                e("h2", { className: "unlock-title" }, MODULE_TITLE),
                                e("p", { style: { color: "var(--text-secondary)", marginBottom: "20px" } }, "Ce module de CERTIFICATION n√©cessite les Modules 01 √† 04."),
                                e("input", { type: "text", className: "code-input", value: unlockCode, onChange: ev => setUnlockCode(ev.target.value), placeholder: "Code du Module 04..." }),
                                unlockError && e("div", { className: "error-msg" }, unlockError),
                                e("div", { style: { marginTop: "30px" } },
                                    e("button", { className: "action-btn", onClick: verifyUnlockCode, disabled: !unlockCode.trim() }, "[ ACC√âDER √Ä L'√âPREUVE ]")
                                )
                            )
                        )
                    )
                );
            }

            function renderIntro() {
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("div", { className: "crown-icon" }, "üëë"),
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "√âpreuve de Certification"),
                        e("div", { className: "module-badge" }, "MODULE FINAL")
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "‚ö°"),
                            e("div", { className: "panel-title" }, "L'Ultime √âpreuve")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "scenario-intro" },
                                e("p", null, e("strong", null, playerData.name), ", tu as parcouru un long chemin."),
                                e("p", { style: { marginTop: "15px" } }, "Tu connais les m√©canismes de capture, les dark patterns, les bulles, et tes droits."),
                                e("p", { style: { marginTop: "15px" } }, "Ce module final teste ta capacit√© √† ", e("strong", { style: { color: "var(--master-gold)" } }, "INT√âGRER"), " et ", e("strong", { style: { color: "var(--energy-cyan)" } }, "TRANSMETTRE"), ".")
                            ),
                            e("div", { style: { textAlign: "center", marginTop: "35px" } },
                                e("button", { className: "action-btn", onClick: startGame }, "[ COMMENCER L'√âPREUVE ]")
                            )
                        )
                    )
                );
            }

            function renderFlashcards() {
                const card = flashcardsData[currentFlashcard];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Phase 1 : Synth√®se")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node active" }, "1"),
                        e("div", { className: "progress-node" }, "2"),
                        e("div", { className: "progress-node" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Concept"), e("div", { className: "xp-value" }, `${currentFlashcard + 1}/${flashcardsData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üìö"),
                            e("div", { className: "panel-title" }, "Grimoire du Ma√Ætre")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "flashcard-container" },
                                e("div", { className: `flashcard ${flashcardFlipped ? "flipped" : ""}`, onClick: () => setFlashcardFlipped(!flashcardFlipped) },
                                    e("div", { className: "flashcard-face flashcard-front" },
                                        e("div", { className: "flashcard-mastery" }, card.mastery),
                                        e("div", { className: "flashcard-question" }, card.question),
                                        e("div", { className: "flashcard-hint" }, card.hint)
                                    ),
                                    e("div", { className: "flashcard-face flashcard-back" },
                                        e("div", { className: "flashcard-mastery", style: { background: "linear-gradient(135deg, var(--energy-green), var(--energy-cyan))" } }, "MA√éTRIS√â"),
                                        e("div", { className: "flashcard-answer", dangerouslySetInnerHTML: { __html: card.answer } })
                                    )
                                )
                            ),
                            e("div", { className: "flashcard-nav" },
                                e("button", { className: "nav-btn", onClick: prevFlashcard, disabled: currentFlashcard === 0 }, "‚óÑ PR√âC"),
                                e("button", { className: "nav-btn", onClick: nextFlashcard }, currentFlashcard < flashcardsData.length - 1 ? "SUIV ‚ñ∫" : "PHASE 2 ‚ñ∫")
                            )
                        )
                    )
                );
            }

            function renderQuiz() {
                const question = quizData[currentQuiz];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Phase 2 : Int√©gration")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node active" }, "2"),
                        e("div", { className: "progress-node" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Score"), e("div", { className: "xp-value" }, playerData.quizScore)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "√âpreuve"), e("div", { className: "xp-value" }, `${currentQuiz + 1}/${quizData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "üß†"),
                            e("div", { className: "panel-title" }, "Test d'Int√©gration")
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "quiz-question" }, question.question),
                            e("div", { className: "quiz-options" },
                                question.options.map((opt, idx) => {
                                    let optClass = "quiz-option";
                                    if (showQuizFeedback) {
                                        if (idx === question.correct) optClass += " correct";
                                        else if (idx === selectedAnswer) optClass += " incorrect";
                                    } else if (idx === selectedAnswer) optClass += " selected";
                                    return e("div", { key: idx, className: optClass, onClick: () => selectQuizAnswer(idx) },
                                        e("div", { className: "option-marker" }, String.fromCharCode(65 + idx)),
                                        e("div", { className: "option-text" }, opt)
                                    );
                                })
                            ),
                            showQuizFeedback && e("div", { className: `feedback-box ${selectedAnswer !== question.correct ? "incorrect-feedback" : ""}` },
                                e("div", { className: "feedback-title" }, selectedAnswer === question.correct ? "‚úì MA√éTRISE CONFIRM√âE" : "‚úó APPROFONDIR"),
                                e("p", null, question.feedback)
                            ),
                            e("div", { style: { textAlign: "center", marginTop: "30px" } },
                                !showQuizFeedback ?
                                    e("button", { className: "action-btn", onClick: validateQuizAnswer, disabled: selectedAnswer === null }, "[ VALIDER ]") :
                                    e("button", { className: "action-btn", onClick: nextQuizQuestion }, currentQuiz < quizData.length - 1 ? "[ SUIVANT ]" : "[ PHASE FINALE ]")
                            )
                        )
                    )
                );
            }

            function renderScenarios() {
                const scenario = scenarioData[currentScenario];
                return e("div", { className: "app-container" },
                    e("div", { className: "header" },
                        e("h1", { className: "glitch-title" }, MODULE_TITLE),
                        e("div", { className: "subtitle" }, "Phase 3 : Transmission")
                    ),
                    e("div", { className: "progress-bar" },
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node completed" }, "‚úì"),
                        e("div", { className: "progress-node active" }, "3")
                    ),
                    e("div", { className: "xp-display" },
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "XP Total"), e("div", { className: "xp-value" }, playerData.xp)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "Score"), e("div", { className: "xp-value" }, playerData.score)),
                        e("div", { className: "xp-box" }, e("div", { className: "xp-label" }, "D√©fi"), e("div", { className: "xp-value" }, `${currentScenario + 1}/${scenarioData.length}`))
                    ),
                    e("div", { className: "content-panel" },
                        e("div", { className: "panel-header" },
                            e("div", { className: "panel-icon" }, "‚öîÔ∏è"),
                            e("div", { className: "panel-title" }, scenario.title)
                        ),
                        e("div", { className: "panel-body" },
                            e("div", { className: "scenario-context" }, scenario.context),
                            e("div", { className: "scenario-intro" }, scenario.intro),
                            !showScenarioResult ?
                                e("div", null, scenario.choices.map((choice, idx) =>
                                    e("button", { key: idx, className: "choice-btn", onClick: () => makeScenarioChoice(idx) }, choice.text)
                                )) :
                                e("div", { className: "choice-result" },
                                    e("p", { style: { marginBottom: "18px", lineHeight: "1.8" } }, scenario.choices[scenarioChoice].result),
                                    e("div", { className: "impact-score" },
                                        Object.entries(scenario.choices[scenarioChoice].impact).map(([key, val]) =>
                                            e("div", { key: key, className: `impact-item ${val > 0 ? "positive" : "negative"}` }, `${key}: ${val > 0 ? "+" : ""}${val}`)
                                        )
                                    ),
                                    e("div", { style: { textAlign: "center", marginTop: "30px" } },
                                        e("button", { className: "action-btn", onClick: nextScenario }, currentScenario < scenarioData.length - 1 ? "[ SUIVANT ]" : "[ CERTIFICATION ]")
                                    )
                                )
                        )
                    )
                );
            }

            function renderComplete() {
                const mastery = getMasteryLevel(playerData.score);
                const saveCode = generateSaveCode();
                return e("div", { className: "app-container" },
                    e("div", { className: "completion-screen" },
                        e("div", { className: "certificate-frame" },
                            e("div", { className: "completion-icon" }, "üëë"),
                            e("h1", { className: "completion-title" }, "CERTIFICATION OBTENUE"),
                            e("p", { className: "completion-subtitle" }, `${playerData.name} est officiellement`),
                            e("div", { className: `mastery-badge ${mastery.class}` }, mastery.level),
                            e("p", { style: { fontFamily: "'Share Tech Mono', monospace", fontSize: "1rem", color: "var(--text-secondary)", marginTop: "20px" } }, 
                                "Pilier NUM√âRIQUE ‚Ä¢ Architecte de son Feed ‚Ä¢ " + new Date().toLocaleDateString('fr-FR')
                            )
                        ),
                        e("div", { className: "stats-grid" },
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.score), e("div", { className: "stat-label" }, "Score Final")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.xp), e("div", { className: "stat-label" }, "XP Total")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.quizScore), e("div", { className: "stat-label" }, "Int√©gration")),
                            e("div", { className: "stat-card" }, e("div", { className: "stat-value" }, playerData.scenarioScore), e("div", { className: "stat-label" }, "Transmission"))
                        ),
                        e("div", { className: "save-code-box" },
                            e("div", { className: "save-code-label" }, "üèÜ CODE DE CERTIFICATION PILIER NUM√âRIQUE :"),
                            e("div", { className: "save-code" }, saveCode),
                            e("button", { className: "copy-btn", onClick: copyCode }, "Copier le code")
                        ),
                        e("div", { className: "content-panel", style: { marginTop: "35px", textAlign: "left" } },
                            e("div", { className: "panel-header" },
                                e("div", { className: "panel-icon" }, "üéì"),
                                e("div", { className: "panel-title" }, "Tu es maintenant")
                            ),
                            e("div", { className: "panel-body" },
                                e("p", null, "Un¬∑e ", e("strong", { style: { color: "var(--master-gold)" } }, "Architecte de ton Feed"), " qui :"),
                                e("p", { style: { marginTop: "15px" } }, "‚Ä¢ Comprend les m√©canismes de l'√©conomie de l'attention"),
                                e("p", null, "‚Ä¢ Reconna√Æt et d√©joue les dark patterns"),
                                e("p", null, "‚Ä¢ Sait identifier et √©clater ses bulles de filtre"),
                                e("p", null, "‚Ä¢ Conna√Æt et exerce ses droits num√©riques"),
                                e("p", null, "‚Ä¢ Peut transmettre ces connaissances aux autres"),
                                e("p", { style: { marginTop: "20px", color: "var(--energy-cyan)" } }, 
                                    "Prochain d√©fi : le pilier ", e("strong", null, "Dynamiques de Groupe"), " pour comprendre la psychologie sociale du harc√®lement."
                                )
                            )
                        )
                    )
                );
            }

            switch (gameState) {
                case "unlock": return renderUnlock();
                case "intro": return renderIntro();
                case "flashcards": return renderFlashcards();
                case "quiz": return renderQuiz();
                case "scenarios": return renderScenarios();
                case "complete": return renderComplete();
                default: return renderUnlock();
            }
        }

        ReactDOM.createRoot(document.getElementById("root")).render(e(App));
    </script>
</body>
</html>
